/*
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Traumatic Brain Injury",
 "subDiseaseName": "Acute Hospitalized",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Infant and Toddler Measures"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Traumatic Brain Injury",
 "subDiseaseName": "Epidemiology",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Infant and Toddler Measures"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Traumatic Brain Injury",
 "subDiseaseName": "Concussion/Mild TBI",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Infant and Toddler Measures"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Traumatic Brain Injury",
 "subDiseaseName": "Moderate/Severe TBI: Rehabilitation",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Infant and Toddler Measures"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Congenital Muscular Dystrophy",
 "subDiseaseName": "Congenital Muscular Dystrophy (CMD)",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Functional Status"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Spinal Muscular Atrophy",
 "subDiseaseName": "Spinal Muscular Atrophy (SMA)",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Pediatric"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Epilepsy",
 "subDiseaseName": "Epilepsy",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Neuropsychological Testing"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Mitochondrial Disease",
 "subDiseaseName": "Mitochondrial Disease",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Neuropsychological Testing"
 },
 {
 "crfModuleGuideline": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "description": "Bayley Scales of Infant Development (Bayley III, BSID)",
 "copyRight": "true",
 "downloads": "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
 "downloadsTitle": "Notice of Copyright",
 "cdes": [],
 "versionNum": "1.0",
 "versionDate": "05/16/2013",
 "diseaseName": "Stroke",
 "subDiseaseName": "Stroke",
 "domainName": "Outcomes and End Points",
 "subDomainName": "Pediatric"
 },
 */
var classificationShared = require('../../modules/system/shared/classificationShared.js');

var source = {
    stewardOrg: {
        name: "NINDS"
    }, naming: [{
        designation: "Bayley Scales of Infant Development (Bayley III, BSID)",
        definition: "Bayley Scales of Infant Development (Bayley III, BSID)"
    }],
    isCopyrighted: true,
    referenceDocuments: [{
        title: "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
        uri: "Notice of Copyright"
    }], registrationState: {
        registrationStatus: "Qualified"
    },
    "cdes": [], formElements: [],
    classification: [{
        stewardOrg: {name: "NINDS"},
        elements: [{
            name: "Disease",
            elements: [{
                name: "Traumatic Brain Injury",
                elements: [{
                    name: "Neuromuscular Diseases",
                    elements: [{
                        name: "Domain",
                        elements: [{
                            name: "Outcomes and End Points",
                            elements: [{name: "Neuromuscular Diseases (NMD)", elements: []}]
                        }]
                    }]
                }]
            }]
        }, {
            name: "Domain",
            elements: [{
                name: "Outcomes and End Points",
                elements: [{
                    name: "Pediatric",
                    elements: []
                }]
            }]
        }]
    }]
};
var dest = {
    stewardOrg: {
        name: "NINDS"
    },
    naming: [{
        designation: "Bayley Scales of Infant Development (Bayley III, BSID)",
        definition: "Bayley Scales of Infant Development (Bayley III, BSID)"
    }],
    isCopyrighted: true,
    referenceDocuments: [{
        title: "https://commondataelements.ninds.nih.gov/Doc/NOC/Bayley_Scales_of_Infant_Development_NOC_Link.pdf",
        uri: "Notice of Copyright"
    }], registrationState: {
        registrationStatus: "Qualified"
    },
    "cdes": [], formElements: [],
    classification: [{
        stewardOrg: {name: "NINDS"},
        elements: [{
            name: "Disease",
            elements: [{
                name: "Traumatic Brain Injury",
                elements: [{
                    name: "Comprehensive",
                    elements: [{
                        name: "Domain",
                        elements: [{
                            name: "Outcomes and End Points",
                            elements: [{name: "Infant and Toddler Measures", elements: []}]
                        }]
                    }]
                }]
            }]
        }, {
            name: "Domain",
            elements: [{
                name: "Outcomes and End Points",
                elements: [{
                    name: "Infant and Toddler Measures",
                    elements: []
                }]
            }]
        }]
    }]
};
var mergeDomain = function (sourceDomain, destDomain) {
    var sn = sourceDomain.elements[0].name;
    for (var i = 0; i < destDomain.elements.length; i++) {
        var dn = destDomain.elements[i].name;
        if (sn === dn) {
            var merge = true;
            for (var j = 0; j < destDomain.elements[i].elements.length; j++) {
                if (destDomain.elements[i].elements[j].name === sourceDomain.elements[0].elements[0].name)
                    merge = false;
            }
            if (merge) {
                destDomain.elements[i].elements.push(sourceDomain.elements[0].elements[0]);
            }
        }
        else {
            destDomain.elements.push(sourceDomain.elements[0]);
        }
    }
};
var mergeDiseaseAndDomain = function (sourceClassification, destClassification) {
    console.log('mergeDiseaseAndDomain');
    var sourceDisease = sourceClassification.elements[0];
    var sourceDomain = sourceClassification.elements[1];
    var destDisease = destClassification.elements[0];
    var destDomain = destClassification.elements[1];
    mergeDomain(sourceDomain, destDomain);

}
var mergeClassifications = function (source, dest) {
    console.log('mergeClassifications');
    mergeDiseaseAndDomain(source.classification[0], dest.classification[0]);
}


mergeClassifications(source, dest);
