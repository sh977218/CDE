<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" routerLink="/home" id="homeLink">
        <img alt="Home" src="/cde/public/assets/img/nih-cde-logo-simple.png"/>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item" [ngClass]="{active: isPageActive('/cde/search')}">
                <a id="menu_cdes_link" class="nav-link" routerLink="/cde/search">CDEs</a>
            </li>
            <li class="nav-item" [ngClass]="{active: isPageActive('/form/search')}">
                <a id="menu_forms_link" class="nav-link" routerLink="/form/search">Forms</a>
            </li>
            <li *ngIf="!userService.user?._id" class="nav-item" [ngClass]="{active: isPageActive('/boardList')}">
                <a id="boardsMenu" class="nav-link" routerLink="/boardList">Boards</a>
            </li>
            <li *ngIf="userService.user?._id" class="nav-item dropdown"
                [ngClass]="{active: isPageActive('/boardList') || isPageActive('/myboards')}">
                <a id="boardsMenu" class="nav-link dropdown-toggle" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false">Boards</a>
                <div class="dropdown-menu" aria-labelledby="boardsMenu">
                    <a id="publicBoardsLink" routerLink="/boardList" class="dropdown-item">Public Boards</a>
                    <a id="myBoardsLink" routerLink="/myboards" class="dropdown-item">My Boards</a>
                </div>
            </li>
            <li class="nav-item dropdown"
                [ngClass]="{ active: isPageActive('/createCde') || isPageActive('/createForm')}"
                *ngIf="authShared.isOrgCurator(userService.user)">
                <a id="createEltLink" class="nav-link dropdown-toggle" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false">Create</a>
                <div class="dropdown-menu" aria-labelledby="createEltLink">
                    <a id="createCDELink" routerLink="/createCde" class="dropdown-item">CDE</a>
                    <a id="createFormLink" routerLink="/createForm" *ngIf="authShared.canCreateForms(userService.user)"
                       class="dropdown-item">Form</a>
                </div>
            </li>
            <li class="nav-item" [ngClass]="{active: isPageActive('/quickBoard')}">
                <a id="menu_qb_link" class="nav-link" routerLink="/quickBoard"
                   [textContent]="'Quick Board (' + (quickBoardService.number_dataElements + quickBoardService.number_forms) + ')'"></a>
            </li>
            <li class="nav-item dropdown" [ngClass]="{active: isPageActive('/help')}">
                <a id="menu_help_link" class="nav-link dropdown-toggle" data-toggle="dropdown"
                   aria-haspopup="true" aria-expanded="false">Help</a>
                <div class="dropdown-menu" aria-labelledby="menu_help_link">
                    <a id="apiDocumentationLink" class="dropdown-item" routerLink="/api">API Documentation</a>
                </div>
            </li>
        </ul>
        <div class="navbar-nav ml-auto">
            <ul class="navbar-nav float-right" attr.data-userloaded="loaded-{{userService.user?true:false}}">
                <li class="nav-item" *ngIf="userService.user?.hasMail">
                    <a routerLink="/inbox" class="nav-link">
                        <i id="incomingMessage" class="fa fa-envelope text-danger"></i>
                    </a>
                </li>
                <li class="nav-item" [ngClass]="{active: isPageActive('/login')}" *ngIf="!userService.user?._id">
                    <a (click)="loginSvc.goToLogin()" id="login_link" class="nav-link" title="Log in"
                       routerLink="/login">
                        Log In</a>
                </li>
                <li class="nav-item dropdown" *ngIf="userService.user?._id">
                    <a id="username_link" class="nav-link dropdown-toggle" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false"
                       [textContent]="userService.user?.username | cdeTruncateLongName"></a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="username_link">
                        <a routerLink="/profile" id="user_profile" class="dropdown-item" *ngIf="userService.user?._id">Profile</a>
                        <a routerLink="/inbox" id="user_inbox" class="dropdown-item">Inbox</a>
                        <a routerLink="/orgComments" id="org_comments" class="dropdown-item"
                           *ngIf="authShared.isOrgCurator(userService.user) && !userService.user?.siteAdmin">
                            Org Comments</a>
                        <a routerLink="/classificationmanagement" id="user_classifications"
                           class="dropdown-item"
                           *ngIf="authShared.isOrgCurator(userService.user)">Classifications</a>
                        <a routerLink="/orgAuthority" id="user_org_authority" class="dropdown-item"
                           *ngIf="authShared.canOrgAuthority(userService.user)">Org Management</a>
                        <a routerLink="/orgaccountmanagement" id="user_account_management"
                           class="dropdown-item"
                           *ngIf="authShared.isOrgAdmin(userService.user)">Account Management</a>
                        <a routerLink="/siteaccountmanagement" id="user_site_management" class="dropdown-item"
                           *ngIf="userService.user?._id && userService.user?.siteAdmin">
                            Site Management</a>
                        <a routerLink="/siteAudit" id="user_audit" class="dropdown-item"
                           *ngIf="authShared.canOrgAuthority(userService.user)">Audit</a>
                        <a (click)="loginSvc.logout()" target="_self" id="user_logout" class="dropdown-item"
                           *ngIf="userService.user?._id">Log Out</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a routerLink="/searchPreferences" title="open search setting" class="nav-link">
                        <i class="fa fa-cog text-muted" id="searchSettings"></i></a>
                </li>
            </ul>
        </div>
    </div>
</nav>
