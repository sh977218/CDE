<div id="pageWrapper" class="boxed-div" style="border: none">

    <h2 class="text-center" *ngIf="!searchStarted" id="searchCdesFormsHeading">Search CDEs</h2>

    <form name="advSearchForm" id="advSearchForm" novalidate="" class="ng-pristine ng-valid ng-valid-maxlength"
          [ngClass]="{'extraPadding': !searchStarted }">

        <div class="input-group input-group">
            <select class="form-control" (change)="selectElement()"
                    name="selectedClassif"
                    [(ngModel)]="selectedClassif" style="width:50%;"
                    [disabled]="aggregations.flatClassifications?.length === 0"
                    [ngClass]="{'halfOpacity':aggregations.flatClassifications?.length === 0}">
                <option value="" selected *ngIf="searchSettings.classification.length > 0">All Sub Classifications</option>
                <option value="" selected *ngIf="searchSettings.classification.length === 0">All Classifications</option>
                <option *ngFor="let classif of aggregations.flatClassifications">{{classif.name}}</option>
            </select>
            <label class="sr-only" for="ftsearch-input">Search Terms</label>
            <input name="q" id="ftsearch-input" style="width: 50%"
                   class="form-control search-query ng-pristine ng-valid ng-empty ng-valid-maxlength ng-touched"
                   type="text" [(ngModel)]="searchSettings.q"
                   placeholder="Search..."
                   autocomplete="off">
            <div class="input-group-btn">
                <button id="search.submit" (click)="searchStarted = true;  search()" type="submit"
                        class="btn btn-danger">
                    <i class="fa fa-search"></i> Search
                </button>
                <button id="search.reset" (click)="reset()" class="btn">
                    <i class="fa fa-search"></i> Reset
                </button>
            </div>
        </div>
    </form>

    <div> Search Inside
        <ol class="breadcrumb form-control" style="display: inline-block">
            <li *ngIf="!searchSettings.classification.length > 0">All Classifications</li>
            <li *ngFor="let c of searchSettings.classification; let index = index">
                <span class="fake-link" (click)="crumbSelect(index)">{{c}}</span>
            </li>
            <li *ngIf="searchSettings.classification.length > 0 && aggregations.flatClassifications.length > 0">All Sub Classifications
            </li>
        </ol>
        <span *ngIf="took" class="pull-right" style="padding-top:10px">
            {{totalItems}} results <small> ({{took / 1000}} secs)</small></span>
    </div>

    <div class="clearfix"></div>

    <div>
        <div *ngIf="searchStarted" id="searchResult">
            <cde-embedded-cde-search-result
                    *ngIf="searchType === 'cde'"
                    [elts]="elts"
                    [searchViewSettings]="searchViewSettings"
                    [embed]="embed"
            ></cde-embedded-cde-search-result>
            <cde-embedded-form-search-result
                    *ngIf="searchType === 'form'"
                    [elts]="elts"
                    [searchViewSettings]="searchViewSettings"
            ></cde-embedded-form-search-result>
        </div>

        <ngb-pagination [collectionSize]="totalItems" [(page)]="searchSettings.page" (pageChange)="searchLogs()"
                        [maxSize]="10"></ngb-pagination>
    </div>

    <small id="poweredByNihCde">Search provided by the <a target="_blank" href="https://cde.nlm.nih.gov/">NIH CDE
        Repository</a></small>
</div>