<div id="historyDiv">
    <h4>History</h4>
    <ng-container *ngIf="priorCdes.length === 0">
        This Element has no history.
    </ng-container>
    <ng-container *ngIf="priorCdes.length > 0">
        <input id="showVersionedHistory" type="checkbox" [(ngModel)]="showVersioned">
        <label for="showVersionedHistory">Only show versioned revisions.</label>
        <button class="btn btn-default">
            <i class="fa fa-files-o"></i> Compare
        </button>
        <table class="table table-hover" id="historyTable">
            <caption>List of previous versions. Click rows to select them.</caption>
            <tr>
                <th width="30px"></th>
                <th>Updated</th>
                <th>Updated by</th>
                <th>Change Note</th>
                <th>Version</th>
                <th>View</th>
            </tr>
            <ng-container *ngFor="let priorCde of priorCdes; let i = index">
                <tr *ngIf="!showVersioned || priorCde.version !== priorCdes[i-1].version"
                    (click)="priorCde.selected = !priorCde.selected;">
                    <td>
                        <i class="fa fa-check-square-o" *ngIf="priorCde.selected" aria-hidden="true"></i>
                        <i class="fa fa-square-o" *ngIf="!priorCde.selected" aria-hidden="true"></i>
                    </td>
                    <td>
                        {{priorCde.updated | date: 'MM/dd/yyyy @ h:mma'}}
                    </td>
                    <td>{{priorCde.updatedBy.username}}</td>
                    <td>{{i === 0?priorCde._changeNote:priorCde.changeNote}}</td>
                    <td>{{priorCde.version}}</td>
                    <td *ngIf="i === 0" class="historyView disabledText">
                        Viewing
                    </td>
                    <td *ngIf="i > 0" class="historyView historyViewButton"
                        (click)="clickView($event,'/deview?cdeId=',priorCde._id);" id="prior-{{i}}">
                        <span class="fa fa-eye fa-2x"></span>
                    </td>
                </tr>
            </ng-container>
        </table>
    </ng-container>
</div>
