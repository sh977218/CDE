<div id="namingDiv">
    <h4>Namings</h4>
    <div *ngIf="elt.naming.length === 0">There are no namings.</div>
    <ng-container *ngFor="let name of elt.naming;let i = index">
        <dl class="row">
            <dt class="col-3 text-right">
                <span (click)="removeNamingByIndex(i)" *ngIf="canEdit && !name.edit"
                      class="btn-outline-dark fa fa-trash-o"
                      id="removeNaming-{{i}}" title="Remove"></span>
                <cde-sortable-array [theArray]="elt.naming" [index]="i" (cb)="onEltChange.emit()"></cde-sortable-array>
                Name:
            </dt>
            <dd id="designation_{{i}}" class="col-9">
                <cde-inline-edit id="nameEdit" [(model)]="name.designation" (modelChange)="onEltChange.emit();"
                                 [isAllowed]="canEdit"></cde-inline-edit>
            </dd>
            <dt class="col-3 text-right">Definition:</dt>
            <dd id="definition_{{i}}" class="col-9">
                <cde-inline-area-edit [(model)]="name.definition" (modelChange)="onEltChange.emit();"
                                      [(defFormat)]="name.definitionFormat"
                                      [isAllowed]="canEdit"></cde-inline-area-edit>
            </dd>
            <dt class="col-3 text-right">Tags:</dt>
            <dd id="tags_{{i}}" class="col-9">
                <ng-select [(ngModel)]="name.tags" [items]="tags" [hideSelected]="true"
                           [disabled]="!canEdit" multiple="true" [appendTo]="'body'" (change)="onEltChange.emit();">
                </ng-select>
            </dd>
        </dl>
        <hr>
    </ng-container>
    <button *ngIf="canEdit" id="openNewNamingModalBtn"
            class="btn   btn-outline-dark" (click)="openNewNamingModal();">
        <i class="fa fa-plus"></i> Add Naming
    </button>
</div>
<ng-template #newNamingContent id="newNamingModal" let-c="close" let-d="dismiss">
    <div class="modal-header" id="newNamingModalHeader">
        <h4 class="modal-title">Add Naming</h4>
    </div>
    <form role="form" #newNamingForm="ngForm" (ngSubmit)="addNewNaming()">
        <div class="modal-body" id="newNamingModalBody">
            <div class="form-group">
                <label for="newDesignation">Name</label>
                <input class="form-control" id="newDesignation" name="newDesignation"
                       [(ngModel)]="newNaming.designation" Placeholder="Name / Designation" required/>
            </div>
            <div class="form-group">
                <label for="newDefinition">Definition</label>
                <div id="newDefinition">
                    <button type="button" class="btn btn-outline-dark btn-xs"
                            (click)="newNaming.definitionFormat = '';">
                        Plain Text
                    </button>
                    <button type="button" class="btn btn-outline-dark btn-xs"
                            (click)="newNaming.definitionFormat = 'html';">
                        Rich Text
                    </button>
                    <textarea name="definition" *ngIf="newNaming.definitionFormat !== 'html'"
                              [(ngModel)]="newNaming.definition" required
                              class="form-control" Placeholder="Naming Definition"></textarea>
                    <ckeditor name="definition" *ngIf="newNaming.definitionFormat === 'html'"
                              [config]="{extraPlugins: 'divarea'}" [(ngModel)]="newNaming.definition"
                              Placeholder="Naming Definition">
                    </ckeditor>
                </div>
            </div>
            <div class="form-group">
                <label for="newTags">Tags</label>
                <div id="newTags">
                    <ng-select [(ngModel)]="newNaming.tags" [items]="tags" [hideSelected]="true" [hideSelected]="true"
                               placeholder="No Tags found, Tags are managed in Org Management > List Management"
                               multiple="true" [appendTo]="'body'" name="newTags">
                    </ng-select>
                </div>
            </div>
            <div class="alert alert-info">
                Tags are managed in Org Management > List Management
            </div>
        </div>
        <div class="modal-footer" id="newNamingModalFooter">
            <button class="btn btn-outline-dark" (click)="c('Close click')" id="cancelNewNamingBtn"
                    name="cancelNewNamingBtn"
                    type="button">Cancel
            </button>
            <button class="btn  btn-warning" [disabled]="!newNamingForm.form.valid" id="createNewNamingBtn"
                    name="createNewNamingBtn" type="submit">Save
            </button>
        </div>
    </form>
</ng-template>
