<div id="propertiesDiv">
    <h4>Properties</h4>
    <div *ngIf="elt.properties.length === 0">There are no properties.</div>
    <ng-container *ngFor="let prop of elt.properties;let i = index">
        <dl class="row">
            <dt class="col-sm-3 text-right">
                <ng-container *ngIf="canEdit && prop.edit">Confirm Delete
                    <span class="btn-default fa fa-check" (click)="removePropertyByIndex(i)"
                          id="confirmRemoveProperty-{{i}}" title="OK"></span>
                    <span class="btn-default fa fa-times" (click)="prop.edit = false"
                          id="cancelRemoveProperty-{{i}}" title="Cancel"></span>
                </ng-container>
                <span (click)="prop.edit = true" *ngIf="canEdit && !prop.edit" class="btn-default fa fa-trash-o"
                      id="removeProperty-{{i}}" title="Remove"></span>
                <cde-sortable-array [theArray]="elt.properties" [index]="i" (cb)="reorderProperty();">
                </cde-sortable-array>
                Key:
            </dt>
            <dd id="key_{{i}}" class="col-sm-9">
                <cde-inline-select-edit [(value)]="prop.key" [selectOptions]="orgPropertyKeys" [isAllowed]="canEdit"
                                        (save)="aa($event);">
                </cde-inline-select-edit>
            </dd>
            <dt class="col-sm-3 text-right">Id:</dt>
            <dd id="value_{{i}}" class="col-sm-9">
                <cde-inline-area-edit [(model)]="prop.value" (save)="onEltChange.emit()"
                                      [(defFormat)]="prop.valueFormat" [isAllowed]="canEdit"></cde-inline-area-edit>
            </dd>
        </dl>
        <hr>
    </ng-container>
    <ng-container *ngIf="newProperty">
        <dl class="row">
            <dt class="col-sm-3 text-right">Key:</dt>
            <dd id="newKey" class="col-sm-9">
                <cde-inline-select-edit [(value)]="newProperty.key" [selectOptions]="orgPropertyKeys"
                                        [isAllowed]="canEdit" (save)="editNewPropertyKey($event);">
                </cde-inline-select-edit>
            </dd>
            <dt class="col-sm-3 text-right">Id:</dt>
            <dd id="newValue" class="col-sm-9">
                <cde-inline-area-edit [(model)]="newProperty.value" (save)="editNewPropertyValue();"
                                      [(defFormat)]="newProperty.valueFormat"
                                      [isAllowed]="canEdit"></cde-inline-area-edit>
            </dd>
        </dl>
    </ng-container>
    <button *ngIf="canEdit && onInitDone" class="btn btn-small btn-default" id="openNewPropertyModalBtn"
            (click)="addNewProperty();">
        <i class="fa fa-plus"></i> Add Property
    </button>
</div>
