var path = require('path');

var express = require('express')
    , https = require('https')
    , fs = require('fs')
    , config = require('../../../system/node-js/parseConfig')
    , bodyParser = require('body-parser')
    , cookieParser = require('cookie-parser')
    , session = require('express-session')
    , methodOverride = require('method-override')
    , morganLogger = require('morgan')
    ;

var app = express();

// all environments
app.set('port', config.vsac.port || 4000);
app.set('views', __dirname + '/views');
app.set('view engine', 'ejs');
app.use(morganLogger('dev'));
app.use(bodyParser.json());
app.use(methodOverride());
app.use(cookieParser('your secret here'));
app.use(session({ secret: 'omgnodeworks', resave: false, saveUninitialized: false}));

app.get('/vsac/ws/Ticket', function(req, res) {
    res.send("MOCKticket.");
});

app.post('/vsac/ws/Ticket', function(req, res) {
    res.send("MOCKticket.");
});

app.post('/vsac/ws/Ticket/:ticketId', function(req, res) {
    res.send("MOCKticket.");
});

app.get('/vsac/ws/RetrieveValueSet', function(req, res) {
    var key = req.query['id'];
    if (!fs.existsSync(path.join(__dirname, './vsac-data/' + key))) {
        res.status(404).send("The requested resource () is not available.");
    } else {
        fs.readFile(path.join(__dirname, './vsac-data/' + key), function(err, data) {
            if (err) {
                res.send("file is corrupt");
            } else {
                res.send(data);
            }
        });
    }
});

var umlsSearches = {
    "female": {"pageSize":25,"pageNumber":1,"result":{"classType":"searchResults","results":[{"ui":"C0015780","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","name":"Female"},{"ui":"C0043210","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0043210","name":"Woman"},{"ui":"C0086287","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0086287","name":"Females"},{"ui":"C1705497","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C1705497","name":"Female, Self-Report"},{"ui":"C1705498","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C1705498","name":"Female Phenotype"},{"ui":"C0001588","rootSource":"MSH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0001588","name":"Adolescents, Female"},{"ui":"C0009873","rootSource":"MSH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0009873","name":"Contraceptive Agents, Female"},{"ui":"C0013394","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0013394","name":"Dyspareunia (female)"},{"ui":"C0015785","rootSource":"MSH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015785","name":"Inhibins, Female"},{"ui":"C0015787","rootSource":"MSH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015787","name":"Female Sterilization"},{"ui":"C0017421","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0017421","name":"Female genitalia"},{"ui":"C0021361","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0021361","name":"Female infertility"},{"ui":"C0025320","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0025320","name":"Menopause"},{"ui":"C0029936","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0029936","name":"Ovariectomy"},{"ui":"C0029939","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0029939","name":"Ovary"},{"ui":"C0029974","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0029974","name":"Ovum"},{"ui":"C0032961","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0032961","name":"Pregnancy"},{"ui":"C0033011","rootSource":"MSH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0033011","name":"Pregnant Women"},{"ui":"C0042993","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0042993","name":"Vulva"},{"ui":"C0079341","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0079341","name":"Female Circumcision"},{"ui":"C0086286","rootSource":"MSH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0086286","name":"Female Contraception"},{"ui":"C0150905","rootSource":"CHV","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0150905","name":"patient is female"},{"ui":"C0151752","rootSource":"MDR","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0151752","name":"Female lactation"},{"ui":"C0156419","rootSource":"SNOMEDCT_US","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0156419","name":"Female hematocele"},{"ui":"C0194606","rootSource":"SNOMEDCT_US","uri":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0194606","name":"Female urethrorrhaphy"}]}}
};

var umlsAtoms = {
    "C0015780": {
        "NCI": {"pageSize":500,"pageNumber":1,"pageCount":1,"result":[{"classType":"Atom","ui":"A10768999","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"AB","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C16576","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C16576","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"F","language":"ENG"},{"classType":"Atom","ui":"A10760885","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"SY","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female","language":"ENG"},{"classType":"Atom","ui":"A7570536","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"PT","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C16576","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C16576","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A7570536/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A7570536/relations","definitions":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A7570536/definitions","name":"Female","language":"ENG"},{"classType":"Atom","ui":"A23970988","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"SY","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/TCGA","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C16576","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female","language":"ENG"},{"classType":"Atom","ui":"A23887023","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"SY","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/NHIS","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C16576","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female","language":"ENG"},{"classType":"Atom","ui":"A10805032","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"PT","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A10805032/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A10805032/definitions","name":"Female Gender","language":"ENG"},{"classType":"Atom","ui":"A10805031","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"SY","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female Gender, Self Report","language":"ENG"},{"classType":"Atom","ui":"A10805030","suppressible":"false","obsolete":"false","rootSource":"NCI","termType":"SY","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/NCI/C46110","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female Gender, Self Reported","language":"ENG"}]},
        "LNC": {"pageSize":500,"pageNumber":1,"pageCount":1,"result":[{"classType":"Atom","ui":"A24095561","suppressible":"false","obsolete":"false","rootSource":"LNC","termType":"LA","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/LNC/LA3-6","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/LNC/LA3-6","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female","language":"ENG"}]},
        "SNOMEDCT_US": {"pageSize":500,"pageNumber":1,"pageCount":1,"result":[{"classType":"Atom","ui":"A2881557","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"PT","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/248152002","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/248152002","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A2881557/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female","language":"ENG"},{"classType":"Atom","ui":"A2881558","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"SY","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A2881558/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female","language":"ENG"},{"classType":"Atom","ui":"A3453091","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"FN","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/248152002","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/248152002","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A3453091/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female (finding)","language":"ENG"},{"classType":"Atom","ui":"A2877558","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"SY","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A2877558/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female individual","language":"ENG"},{"classType":"Atom","ui":"A3453356","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"PT","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A3453356/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female structure","language":"ENG"},{"classType":"Atom","ui":"A3453355","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"FN","code":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","concept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/CUI/C0015780","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/source/SNOMEDCT_US/1086007","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2015AB/AUI/A3453355/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"Female structure (body structure)","language":"ENG"}]}
    },
    "C1515945": {
        "SNOMEDCT_US": {"pageSize":500,"pageNumber":1,"pageCount":1,"result":[{"classType":"Atom","ui":"A7879317","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"PT","code":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/SNOMEDCT_US/413490006","concept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/CUI/C1515945","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/SNOMEDCT_US/413490006","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/AUI/A7879317/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"American Indian or Alaska native","language":"ENG"},{"classType":"Atom","ui":"A7879314","suppressible":"false","obsolete":"false","rootSource":"SNOMEDCT_US","termType":"FN","code":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/SNOMEDCT_US/413490006","concept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/CUI/C1515945","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/SNOMEDCT_US/413490006","sourceDescriptor":"NONE","attributes":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/AUI/A7879314/attributes","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"American Indian or Alaska native (racial group)","language":"ENG"}]},
        "LNC": {"pageSize":500,"pageNumber":1,"pageCount":1,"result":[{"classType":"Atom","ui":"A24098846","suppressible":"false","obsolete":"false","rootSource":"LNC","termType":"LA","code":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/LNC/LA10608-0","concept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/CUI/C1515945","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/LNC/LA10608-0","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"American Indian or Alaska Native","language":"ENG"},{"classType":"Atom","ui":"A24101524","suppressible":"false","obsolete":"false","rootSource":"LNC","termType":"LA","code":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/LNC/LA6155-1","concept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/CUI/C1515945","sourceConcept":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/source/LNC/LA6155-1","sourceDescriptor":"NONE","attributes":"NONE","parents":"NONE","ancestors":null,"children":"NONE","descendants":null,"relations":"NONE","definitions":"NONE","name":"American Indian or Alaska Native","language":"ENG"}]}
    }
};

var umlsFromSrc = {
    "c41259": {"pageSize":25,"pageNumber":1,"result":{"classType":"searchResults","results":[{"ui":"C1515945","rootSource":"MTH","uri":"https://uts-ws.nlm.nih.gov/rest/content/2016AA/CUI/C1515945","name":"American Indian or Alaska Native"}]}}
};

// FAKE UMLS requests
app.get('/rest/search/current', function(req, res) {
    var str = req.query.string.toLowerCase();
    if (req.query.inputType === "sourceUi") {
        res.send(JSON.stringify(umlsFromSrc[str]));
    } else {
        res.send(JSON.stringify(umlsSearches[str]));
    }
});

app.get('/rest/content/current/CUI/:cui/atoms', function(req, res) {
    var cui = req.params.cui;
    var src = req.query.sabs;
    res.send(JSON.stringify(umlsAtoms[cui][src]));
});

var meshRecordSearch = {
    "NINDS":
    {"took":24,"timed_out":false,"_shards":{"total":5,"successful":5,"failed":0},"hits":{"total":1,"max_score":8.951031,"hits":[{"_index":"mesh_descriptor_68","_type":"descriptor","_id":"D055825","_score":8.951031,"_source":{"DescriptorClass":"1","DescriptorUI":{"t":"D055825"},"DescriptorName":{"String":{"t":"National Institute of Neurological Disorders and Stroke"}},"DateCreated":{"Year":{"t":"2008"},"Month":{"t":"07"},"Day":{"t":"08"}},"DateRevised":{"Year":{"t":"2015"},"Month":{"t":"06"},"Day":{"t":"29"}},"DateEstablished":{"Year":{"t":"2009"},"Month":{"t":"01"},"Day":{"t":"01"}},"AllowableQualifiersList":{"AllowableQualifier":[{"QualifierReferredTo":{"QualifierUI":{"t":"Q000331"},"QualifierName":{"String":{"t":"legislation & jurisprudence"}}},"Abbreviation":{"t":"LJ"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000941"},"QualifierName":{"String":{"t":"ethics"}}},"Abbreviation":{"t":"ES"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000656"},"QualifierName":{"String":{"t":"utilization"}}},"Abbreviation":{"t":"UT"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000706"},"QualifierName":{"String":{"t":"statistics & numerical data"}}},"Abbreviation":{"t":"SN"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000639"},"QualifierName":{"String":{"t":"trends"}}},"Abbreviation":{"t":"TD"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000266"},"QualifierName":{"String":{"t":"history"}}},"Abbreviation":{"t":"HI"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000145"},"QualifierName":{"String":{"t":"classification"}}},"Abbreviation":{"t":"CL"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000191"},"QualifierName":{"String":{"t":"economics"}}},"Abbreviation":{"t":"EC"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000458"},"QualifierName":{"String":{"t":"organization & administration"}}},"Abbreviation":{"t":"OG"}},{"QualifierReferredTo":{"QualifierUI":{"t":"Q000592"},"QualifierName":{"String":{"t":"standards"}}},"Abbreviation":{"t":"ST"}}]},"Annotation":{"t":"add UNITED STATES; research support by this agency is checked as RESEARCH SUPPORT, N.I.H., EXTRAMURAL or RESEARCH SUPPORT, N.I.H., INTRAMURAL; CATALOGER: Use NAF entry"},"HistoryNote":{"t":"2009"},"PublicMeSHNote":{"t":"2009"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.461"},{"t":"N03.540.052.750.461"},{"t":"N03.540.348.500.500.600.480.461"}]},"ConceptList":{"Concept":[{"PreferredConceptYN":"Y","ConceptUI":{"t":"M0520893"},"ConceptName":{"String":{"t":"National Institute of Neurological Disorders and Stroke"}},"ScopeNote":{"t":"Component of the NATIONAL INSTITUTES OF HEALTH. It supports and conducts research, both basic and clinical, on the normal and diseases nervous system. It was established in 1950."},"TermList":{"Term":[{"ConceptPreferredTermYN":"Y","IsPermutedTermYN":"N","LexicalTag":"NON","RecordPreferredTermYN":"Y","TermUI":{"t":"T718942"},"String":{"t":"National Institute of Neurological Disorders and Stroke"},"DateCreated":{"Year":{"t":"2008"},"Month":{"t":"04"},"Day":{"t":"29"}},"ThesaurusIDlist":{"ThesaurusID":{"t":"NLM (2009)"}},"_lowerCaseString":{"t":"national institute of neurological disorders and stroke"}},{"ConceptPreferredTermYN":"N","IsPermutedTermYN":"N","LexicalTag":"NAM","RecordPreferredTermYN":"N","TermUI":{"t":"T718944"},"String":{"t":"National Institute of Neurological Disorders and Stroke (U.S.)"},"DateCreated":{"Year":{"t":"2008"},"Month":{"t":"04"},"Day":{"t":"29"}},"ThesaurusIDlist":{"ThesaurusID":{"t":"NLM (2009)"}},"_lowerCaseString":{"t":"national institute of neurological disorders and stroke (u.s.)"}},{"ConceptPreferredTermYN":"N","IsPermutedTermYN":"N","LexicalTag":"ACR","RecordPreferredTermYN":"N","TermUI":{"t":"T718943"},"String":{"t":"NINDS"},"DateCreated":{"Year":{"t":"2008"},"Month":{"t":"04"},"Day":{"t":"29"}},"ThesaurusIDlist":{"ThesaurusID":{"t":"NLM (2009)"}},"_lowerCaseString":{"t":"ninds"}}]}}]},"_generated":{"RecordName":"National Institute of Neurological Disorders and Stroke","RecordUI":"D055825","lowerCaseRecordName":"national institute of neurological disorders and stroke","notAnalyzedAnnotation":"add UNITED STATES; research support by this agency is checked as RESEARCH SUPPORT, N.I.H., EXTRAMURAL or RESEARCH SUPPORT, N.I.H., INTRAMURAL; CATALOGER: Use NAF entry","PreferredConceptScopeNote":"Component of the NATIONAL INSTITUTES OF HEALTH. It supports and conducts research, both basic and clinical, on the normal and diseases nervous system. It was established in 1950.","notAnalyzedPreferredConceptScopeNote":"Component of the NATIONAL INSTITUTES OF HEALTH. It supports and conducts research, both basic and clinical, on the normal and diseases nervous system. It was established in 1950.","EntryTerms":["NINDS","National Institute of Neurological Disorders and Stroke","National Institute of Neurological Disorders and Stroke (U.S.)"],"lowerCaseEntryTerms":["national institute of neurological disorders and stroke","national institute of neurological disorders and stroke (u.s.)","ninds"]}},"highlight":{"_generated.lowerCaseEntryTerms":["<strong>ninds</strong>"]}}]}}
};
var meshUiRecords = {
    'D004194': {"_id":"57b5b7e51b1332852dccffec","DescriptorClass":"1","DateCreated":{"Year":{"t":"1999"},"Month":{"t":"01"},"Day":{"t":"01"}},"DateRevised":{"Year":{"t":"2013"},"Month":{"t":"07"},"Day":{"t":"09"}},"AllowableQualifiersList":{"AllowableQualifier":[{"Abbreviation":{"t":"CL"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"classification"}},"QualifierUI":{"t":"Q000145"}}},{"Abbreviation":{"t":"EC"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"economics"}},"QualifierUI":{"t":"Q000191"}}},{"Abbreviation":{"t":"EH"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"ethnology"}},"QualifierUI":{"t":"Q000208"}}},{"Abbreviation":{"t":"ET"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"etiology"}},"QualifierUI":{"t":"Q000209"}}},{"Abbreviation":{"t":"GE"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"genetics"}},"QualifierUI":{"t":"Q000235"}}},{"Abbreviation":{"t":"HI"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"history"}},"QualifierUI":{"t":"Q000266"}}},{"Abbreviation":{"t":"PX"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"psychology"}},"QualifierUI":{"t":"Q000523"}}}]},"EntryCombinationList":{"EntryCombination":[{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Diagnosis"}},"DescriptorUI":{"t":"D003933"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"diagnosis"}},"QualifierUI":{"t":"Q000175"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Diet Therapy"}},"DescriptorUI":{"t":"D004035"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"diet therapy"}},"QualifierUI":{"t":"Q000178"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Drug Therapy"}},"DescriptorUI":{"t":"D004358"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"drug therapy"}},"QualifierUI":{"t":"Q000188"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Immunity"}},"DescriptorUI":{"t":"D007109"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"immunology"}},"QualifierUI":{"t":"Q000276"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Mortality"}},"DescriptorUI":{"t":"D009026"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"mortality"}},"QualifierUI":{"t":"Q000401"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Nursing Care"}},"DescriptorUI":{"t":"D009732"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"nursing"}},"QualifierUI":{"t":"Q000451"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Epidemiology"}},"DescriptorUI":{"t":"D004813"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"epidemiology"}},"QualifierUI":{"t":"Q000453"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Pathology"}},"DescriptorUI":{"t":"D010336"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"pathology"}},"QualifierUI":{"t":"Q000473"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Preventive Medicine"}},"DescriptorUI":{"t":"D011315"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"prevention & control"}},"QualifierUI":{"t":"Q000517"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Radiotherapy"}},"DescriptorUI":{"t":"D011878"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"radiotherapy"}},"QualifierUI":{"t":"Q000532"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Rehabilitation"}},"DescriptorUI":{"t":"D012046"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"rehabilitation"}},"QualifierUI":{"t":"Q000534"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Therapeutics"}},"DescriptorUI":{"t":"D013812"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"therapy"}},"QualifierUI":{"t":"Q000628"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease Transmission, Infectious"}},"DescriptorUI":{"t":"D018562"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"transmission"}},"QualifierUI":{"t":"Q000635"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}},{"ECOUT":{"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Animal Diseases"}},"DescriptorUI":{"t":"D000820"}}},"ECIN":{"QualifierReferredTo":{"QualifierName":{"String":{"t":"veterinary"}},"QualifierUI":{"t":"Q000662"}},"DescriptorReferredTo":{"DescriptorName":{"String":{"t":"Disease"}},"DescriptorUI":{"t":"D004194"}}}}]},"ConceptList":{"Concept":[{"TermList":{"Term":[{"_lowerCaseString":{"t":"disease"},"ThesaurusIDlist":{"ThesaurusID":[{"t":"BIOETHICS (1999)"},{"t":"POPLINE (1978)"}]},"EntryVersion":{"t":"DIS"},"DateCreated":{"Day":{"t":"01"},"Month":{"t":"01"},"Year":{"t":"1999"}},"String":{"t":"Disease"},"TermUI":{"t":"T012740"},"RecordPreferredTermYN":"Y","LexicalTag":"NON","IsPermutedTermYN":"N","ConceptPreferredTermYN":"Y"},{"_lowerCaseString":{"t":"diseases"},"String":{"t":"Diseases"},"TermUI":{"t":"T012740"},"RecordPreferredTermYN":"N","LexicalTag":"NON","IsPermutedTermYN":"Y","ConceptPreferredTermYN":"N"}]},"ScopeNote":{"t":"A definite pathologic process with a characteristic set of signs and symptoms. It may affect the whole body or any of its parts, and its etiology, pathology, and prognosis may be known or unknown."},"ConceptName":{"String":{"t":"Disease"}},"ConceptUI":{"t":"M0006564"},"PreferredConceptYN":"Y"}]},"_generated":{"RecordName":"Disease","RecordUI":"D004194","lowerCaseRecordName":"disease","notAnalyzedAnnotation":"general only as a physiological, pathological, philosophical concept, opposite \"health\"; Manual 23.5+; / econ permitted but consider also economic aspects of disease as ECONOMICS, MEDICAL; / psychol permitted but consider also psychogenic origin of disease as PSYCHOPHYSIOLOGIC DISORDERS","PreferredConceptScopeNote":"A definite pathologic process with a characteristic set of signs and symptoms. It may affect the whole body or any of its parts, and its etiology, pathology, and prognosis may be known or unknown.","notAnalyzedPreferredConceptScopeNote":"A definite pathologic process with a characteristic set of signs and symptoms. It may affect the whole body or any of its parts, and its etiology, pathology, and prognosis may be known or unknown.","relatedRegistryNumberList":[],"registryNumber":[],"lowerCaseEntryTerms":["disease"],"EntryTerms":["Disease"]},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.288"}]},"DescriptorName":{"String":{"t":"Disease"}},"Annotation":{"t":"general only as a physiological, pathological, philosophical concept, opposite \"health\"; Manual 23.5+; / econ permitted but consider also economic aspects of disease as ECONOMICS, MEDICAL; / psychol permitted but consider also psychogenic origin of disease as PSYCHOPHYSIOLOGIC DISORDERS"},"DescriptorUI":{"t":"D004194"}},
    'D055825':
    {"_id":"57b5c6d4c45d236e4cb7881a","DescriptorClass":"1","DateCreated":{"Year":{"t":"2008"},"Month":{"t":"07"},"Day":{"t":"08"}},"DateRevised":{"Year":{"t":"2015"},"Month":{"t":"06"},"Day":{"t":"29"}},"DateEstablished":{"Year":{"t":"2009"},"Month":{"t":"01"},"Day":{"t":"01"}},"AllowableQualifiersList":{"AllowableQualifier":[{"Abbreviation":{"t":"LJ"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"legislation & jurisprudence"}},"QualifierUI":{"t":"Q000331"}}},{"Abbreviation":{"t":"ES"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"ethics"}},"QualifierUI":{"t":"Q000941"}}},{"Abbreviation":{"t":"UT"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"utilization"}},"QualifierUI":{"t":"Q000656"}}},{"Abbreviation":{"t":"SN"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"statistics & numerical data"}},"QualifierUI":{"t":"Q000706"}}},{"Abbreviation":{"t":"TD"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"trends"}},"QualifierUI":{"t":"Q000639"}}},{"Abbreviation":{"t":"HI"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"history"}},"QualifierUI":{"t":"Q000266"}}},{"Abbreviation":{"t":"CL"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"classification"}},"QualifierUI":{"t":"Q000145"}}},{"Abbreviation":{"t":"EC"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"economics"}},"QualifierUI":{"t":"Q000191"}}},{"Abbreviation":{"t":"OG"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"organization & administration"}},"QualifierUI":{"t":"Q000458"}}},{"Abbreviation":{"t":"ST"},"QualifierReferredTo":{"QualifierName":{"String":{"t":"standards"}},"QualifierUI":{"t":"Q000592"}}}]},"HistoryNote":{"t":"2009"},"PublicMeSHNote":{"t":"2009"},"ConceptList":{"Concept":[{"TermList":{"Term":[{"_lowerCaseString":{"t":"national institute of neurological disorders and stroke"},"ThesaurusIDlist":{"ThesaurusID":{"t":"NLM (2009)"}},"DateCreated":{"Day":{"t":"29"},"Month":{"t":"04"},"Year":{"t":"2008"}},"String":{"t":"National Institute of Neurological Disorders and Stroke"},"TermUI":{"t":"T718942"},"RecordPreferredTermYN":"Y","LexicalTag":"NON","IsPermutedTermYN":"N","ConceptPreferredTermYN":"Y"},{"_lowerCaseString":{"t":"national institute of neurological disorders and stroke (u.s.)"},"ThesaurusIDlist":{"ThesaurusID":{"t":"NLM (2009)"}},"DateCreated":{"Day":{"t":"29"},"Month":{"t":"04"},"Year":{"t":"2008"}},"String":{"t":"National Institute of Neurological Disorders and Stroke (U.S.)"},"TermUI":{"t":"T718944"},"RecordPreferredTermYN":"N","LexicalTag":"NAM","IsPermutedTermYN":"N","ConceptPreferredTermYN":"N"},{"_lowerCaseString":{"t":"ninds"},"ThesaurusIDlist":{"ThesaurusID":{"t":"NLM (2009)"}},"DateCreated":{"Day":{"t":"29"},"Month":{"t":"04"},"Year":{"t":"2008"}},"String":{"t":"NINDS"},"TermUI":{"t":"T718943"},"RecordPreferredTermYN":"N","LexicalTag":"ACR","IsPermutedTermYN":"N","ConceptPreferredTermYN":"N"}]},"ScopeNote":{"t":"Component of the NATIONAL INSTITUTES OF HEALTH. It supports and conducts research, both basic and clinical, on the normal and diseases nervous system. It was established in 1950."},"ConceptName":{"String":{"t":"National Institute of Neurological Disorders and Stroke"}},"ConceptUI":{"t":"M0520893"},"PreferredConceptYN":"Y"}]},"_generated":{"RecordName":"National Institute of Neurological Disorders and Stroke","RecordUI":"D055825","lowerCaseRecordName":"national institute of neurological disorders and stroke","notAnalyzedAnnotation":"add UNITED STATES; research support by this agency is checked as RESEARCH SUPPORT, N.I.H., EXTRAMURAL or RESEARCH SUPPORT, N.I.H., INTRAMURAL; CATALOGER: Use NAF entry","PreferredConceptScopeNote":"Component of the NATIONAL INSTITUTES OF HEALTH. It supports and conducts research, both basic and clinical, on the normal and diseases nervous system. It was established in 1950.","notAnalyzedPreferredConceptScopeNote":"Component of the NATIONAL INSTITUTES OF HEALTH. It supports and conducts research, both basic and clinical, on the normal and diseases nervous system. It was established in 1950.","relatedRegistryNumberList":[],"registryNumber":[],"lowerCaseEntryTerms":["national institute of neurological disorders and stroke","national institute of neurological disorders and stroke (u.s.)","ninds"],"EntryTerms":["NINDS","National Institute of Neurological Disorders and Stroke","National Institute of Neurological Disorders and Stroke (U.S.)"]},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.461"},{"t":"N03.540.052.750.461"},{"t":"N03.540.348.500.500.600.480.461"}]},"DescriptorName":{"String":{"t":"National Institute of Neurological Disorders and Stroke"}},"Annotation":{"t":"add UNITED STATES; research support by this agency is checked as RESEARCH SUPPORT, N.I.H., EXTRAMURAL or RESEARCH SUPPORT, N.I.H., INTRAMURAL; CATALOGER: Use NAF entry"},"DescriptorUI":{"t":"D055825"}}
};
var meshTrees = {
  "C23.550.288": {"children":[{"_id":"57b5b8421b1332852dcd2303","_generated":{"RecordName":"Syndrome","RecordUI":"D013577"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.288.500"}]}}],"siblings":[{"_id":"57b5b8d31b1332852dcd5a06","_generated":{"RecordName":"Atrial Remodeling","RecordUI":"D064752"},"TreeNumberList":{"TreeNumber":[{"t":"C23.300.052"},{"t":"C23.550.113"},{"t":"G09.330.190.075.800"}]}},{"_id":"57b5b8d31b1332852dcd5b53","_generated":{"RecordName":"Vascular Remodeling","RecordUI":"D066253"},"TreeNumberList":{"TreeNumber":[{"t":"C23.300.977"},{"t":"C23.550.918"},{"t":"G09.330.930"}]}},{"_id":"57b5b7b91b1332852dcceec7","_generated":{"RecordName":"Acantholysis","RecordUI":"D000051"},"TreeNumberList":{"TreeNumber":[{"t":"C17.800.865.070"},{"t":"C23.550.035"}]}},{"_id":"57b5b7c31b1332852dccf47e","_generated":{"RecordName":"Arrhythmias, Cardiac","RecordUI":"D001145"},"TreeNumberList":{"TreeNumber":[{"t":"C14.280.067"},{"t":"C23.550.073"}]}},{"_id":"57b5b7c31b1332852dccf4b6","_generated":{"RecordName":"Ascites","RecordUI":"D001201"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.081"}]}},{"_id":"57b5b8b71b1332852dcd4d37","_generated":{"RecordName":"Azotemia","RecordUI":"D053099"},"TreeNumberList":{"TreeNumber":[{"t":"C12.777.419.936.231"},{"t":"C13.351.968.419.936.231"},{"t":"C23.550.145"}]}},{"_id":"57b5b8d31b1332852dcd5b24","_generated":{"RecordName":"Cardiotoxicity","RecordUI":"D066126"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.161"},{"t":"C25.100.389"},{"t":"C26.733.266"},{"t":"G01.750.748.500.266"}]}},{"_id":"57b5b8b71b1332852dcd4dac","_generated":{"RecordName":"Channelopathies","RecordUI":"D053447"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.177"}]}},{"_id":"57b5b7db1b1332852dccfaf8","_generated":{"RecordName":"Chromosome Aberrations","RecordUI":"D002869"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.210"},{"t":"G05.365.590.175"}]}},{"_id":"57b5b7db1b1332852dccfdd9","_generated":{"RecordName":"Death","RecordUI":"D003643"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.260"}]}},{"_id":"57b5b7db1b1332852dccfdff","_generated":{"RecordName":"Dehydration","RecordUI":"D003681"},"TreeNumberList":{"TreeNumber":[{"t":"C18.452.950.179"},{"t":"C23.550.274"}]}},{"_id":"57b5b8ad1b1332852dcd4c31","_generated":{"RecordName":"Delayed Graft Function","RecordUI":"D051799"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.277"}]}},{"_id":"57b5b7e51b1332852dccffec","_generated":{"RecordName":"Disease","RecordUI":"D004194"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.288"}]}},{"_id":"57b5b8861b1332852dcd3bd0","_generated":{"RecordName":"Disease Attributes","RecordUI":"D020969"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.291"}]}},{"_id":"57b5b8d31b1332852dcd5a1b","_generated":{"RecordName":"Dysbiosis","RecordUI":"D064806"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.308"}]}},{"_id":"57b5b7e51b1332852dcd01a0","_generated":{"RecordName":"Emphysema","RecordUI":"D004646"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.325"}]}},{"_id":"57b5b7f01b1332852dcd0362","_generated":{"RecordName":"Extravasation of Diagnostic and Therapeutic Materials","RecordUI":"D005119"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.340"},{"t":"C26.371"}]}},{"_id":"57b5b8ca1b1332852dcd5453","_generated":{"RecordName":"Femoracetabular Impingement","RecordUI":"D057925"},"TreeNumberList":{"TreeNumber":[{"t":"C05.550.384"},{"t":"C23.550.347"}]}},{"_id":"57b5b7f01b1332852dcd0441","_generated":{"RecordName":"Fibrosis","RecordUI":"D005355"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.355"}]}},{"_id":"57b5b8a21b1332852dcd452f","_generated":{"RecordName":"Genomic Instability","RecordUI":"D042822"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.362"},{"t":"G05.365.590.335"},{"t":"G05.370"}]}},{"_id":"57b5b7fa1b1332852dcd065b","_generated":{"RecordName":"Gliosis","RecordUI":"D005911"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.369"}]}},{"_id":"57b5b7fa1b1332852dcd0710","_generated":{"RecordName":"Granuloma","RecordUI":"D006099"},"TreeNumberList":{"TreeNumber":[{"t":"C15.604.515.292"},{"t":"C23.550.382"}]}},{"_id":"57b5b8ad1b1332852dcd4b4f","_generated":{"RecordName":"Granulomatosis, Orofacial","RecordUI":"D051261"},"TreeNumberList":{"TreeNumber":[{"t":"C07.465.353"},{"t":"C23.550.384"}]}},{"_id":"57b5b7fa1b1332852dcd072c","_generated":{"RecordName":"Growth Disorders","RecordUI":"D006130"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.393"}]}},{"_id":"57b5b7fa1b1332852dcd0869","_generated":{"RecordName":"Hemolysis","RecordUI":"D006461"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.403"},{"t":"G12.425.143.545"}]}},{"_id":"57b5b7fa1b1332852dcd0872","_generated":{"RecordName":"Hemorrhage","RecordUI":"D006470"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.414"}]}},{"_id":"57b5b8861b1332852dcd3c24","_generated":{"RecordName":"Hyperammonemia","RecordUI":"D022124"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.421"}]}},{"_id":"57b5b8991b1332852dcd4289","_generated":{"RecordName":"Hyperamylasemia","RecordUI":"D034321"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.425"}]}},{"_id":"57b5b8061b1332852dcd0a1d","_generated":{"RecordName":"Hyperbilirubinemia","RecordUI":"D006932"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.429"}]}},{"_id":"57b5b8061b1332852dcd0a3e","_generated":{"RecordName":"Hyperplasia","RecordUI":"D006965"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.444"}]}},{"_id":"57b5b8991b1332852dcd4245","_generated":{"RecordName":"Hyperuricemia","RecordUI":"D033461"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.449"}]}},{"_id":"57b5b8861b1332852dcd3b8e","_generated":{"RecordName":"Hypovolemia","RecordUI":"D020896"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.455"}]}},{"_id":"57b5b8061b1332852dcd0b53","_generated":{"RecordName":"Inflammation","RecordUI":"D007249"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.470"}]}},{"_id":"57b5b8061b1332852dcd0bff","_generated":{"RecordName":"Intraoperative Complications","RecordUI":"D007431"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.505"}]}},{"_id":"57b5b8061b1332852dcd0c4d","_generated":{"RecordName":"Ischemia","RecordUI":"D007511"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.513"}]}},{"_id":"57b5b8ad1b1332852dcd48f0","_generated":{"RecordName":"Leukoaraiosis","RecordUI":"D049292"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.522"}]}},{"_id":"57b5b8111b1332852dcd0df5","_generated":{"RecordName":"Leukocytosis","RecordUI":"D007964"},"TreeNumberList":{"TreeNumber":[{"t":"C15.378.553.475"},{"t":"C23.550.526"}]}},{"_id":"57b5b8861b1332852dcd39ad","_generated":{"RecordName":"Lithiasis","RecordUI":"D020347"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.537"}]}},{"_id":"57b5b7b91b1332852dccf03a","_generated":{"RecordName":"Long Term Adverse Effects","RecordUI":"D000069451"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.543"}]}},{"_id":"57b5b8111b1332852dcd0f2d","_generated":{"RecordName":"Malacoplakia","RecordUI":"D008287"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.548"}]}},{"_id":"57b5b8111b1332852dcd105c","_generated":{"RecordName":"Menstruation Disturbances","RecordUI":"D008599"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.568"}]}},{"_id":"57b5b8111b1332852dcd10a9","_generated":{"RecordName":"Metaplasia","RecordUI":"D008679"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.589"}]}},{"_id":"57b5b87b1b1332852dcd34f3","_generated":{"RecordName":"Muscle Weakness","RecordUI":"D018908"},"TreeNumberList":{"TreeNumber":[{"t":"C05.651.515"},{"t":"C10.597.613.593"},{"t":"C23.550.695"},{"t":"C23.888.592.608.593"}]}},{"_id":"57b5b81b1b1332852dcd131a","_generated":{"RecordName":"Necrosis","RecordUI":"D009336"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.717"},{"t":"G04.299.139.638"}]}},{"_id":"57b5b8ca1b1332852dcd54d0","_generated":{"RecordName":"Neointima","RecordUI":"D058426"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.722"}]}},{"_id":"57b5b81b1b1332852dcd1348","_generated":{"RecordName":"Neoplastic Processes","RecordUI":"D009385"},"TreeNumberList":{"TreeNumber":[{"t":"C04.697"},{"t":"C23.550.727"}]}},{"_id":"57b5b81b1b1332852dcd1360","_generated":{"RecordName":"Nerve Degeneration","RecordUI":"D009410"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.737"}]}},{"_id":"57b5b81b1b1332852dcd14d7","_generated":{"RecordName":"Ochronosis","RecordUI":"D009794"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.744"}]}},{"_id":"57b5b81b1b1332852dcd1598","_generated":{"RecordName":"Ossification, Heterotopic","RecordUI":"D009999"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.751"}]}},{"_id":"57b5b8ca1b1332852dcd568b","_generated":{"RecordName":"Polydipsia","RecordUI":"D059606"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.759"},{"t":"C23.888.663"}]}},{"_id":"57b5b82f1b1332852dcd1a0f","_generated":{"RecordName":"Postoperative Complications","RecordUI":"D011183"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.767"}]}},{"_id":"57b5b8d31b1332852dcd5b5d","_generated":{"RecordName":"Protein Aggregation, Pathological","RecordUI":"D066263"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.770"},{"t":"G02.111.668"}]}},{"_id":"57b5b8b71b1332852dcd4d3a","_generated":{"RecordName":"Respiratory Aspiration","RecordUI":"D053120"},"TreeNumberList":{"TreeNumber":[{"t":"C08.618.749"},{"t":"C23.550.773"}]}},{"_id":"57b5b8381b1332852dcd1dce","_generated":{"RecordName":"Retropneumoperitoneum","RecordUI":"D012188"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.794"},{"t":"C26.748"}]}},{"_id":"57b5b8381b1332852dcd1f57","_generated":{"RecordName":"Sclerosis","RecordUI":"D012598"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.823"}]}},{"_id":"57b5b8381b1332852dcd1ff9","_generated":{"RecordName":"Shock","RecordUI":"D012769"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.835"}]}},{"_id":"57b5b8d31b1332852dcd5a10","_generated":{"RecordName":"Teratogenesis","RecordUI":"D064793"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.863"}]}},{"_id":"57b5b84d1b1332852dcd2657","_generated":{"RecordName":"Ulcer","RecordUI":"D014456"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.891"}]}},{"_id":"57b5b8651b1332852dcd2da3","_generated":{"RecordName":"Yang Deficiency","RecordUI":"D016711"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.945"}]}},{"_id":"57b5b8651b1332852dcd2da2","_generated":{"RecordName":"Yin Deficiency","RecordUI":"D016710"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550.972"}]}}],"parents":[{"_id":"57b5b8421b1332852dcd22fb","_generated":{"RecordName":"Pathological Conditions, Signs and Symptoms","RecordUI":"D013568"},"TreeNumberList":{"TreeNumber":[{"t":"C23"}]}},{"_id":"57b5b8241b1332852dcd16dd","_generated":{"RecordName":"Pathologic Processes","RecordUI":"D010335"},"TreeNumberList":{"TreeNumber":[{"t":"C23.550"}]}}]},
  "I01.409.418.750.600.480.461":
  {"children":[],"siblings":[{"_id":"57b5d4d3c31425826b8e7abb","_generated":{"RecordName":"National Cancer Institute (U.S.)","RecordUI":"D054547"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.150"},{"t":"N03.540.052.750.150"},{"t":"N03.540.348.500.500.600.480.150"}]}},{"_id":"57b5d4d3c31425826b8e7abe","_generated":{"RecordName":"National Eye Institute (U.S.)","RecordUI":"D054554"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.200"},{"t":"N03.540.052.750.200"},{"t":"N03.540.348.500.500.600.480.200"}]}},{"_id":"57b5d4d3c31425826b8e7abf","_generated":{"RecordName":"National Heart, Lung, and Blood Institute (U.S.)","RecordUI":"D054555"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.300"},{"t":"N03.540.052.750.300"},{"t":"N03.540.348.500.500.600.480.300"}]}},{"_id":"57b5d4d3c31425826b8e7ac4","_generated":{"RecordName":"National Human Genome Research Institute (U.S.)","RecordUI":"D054560"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.325"},{"t":"N03.540.052.750.325"},{"t":"N03.540.348.500.500.600.480.325"}]}},{"_id":"57b5d4d3c31425826b8e7aca","_generated":{"RecordName":"National Institute of Allergy and Infectious Diseases (U.S.)","RecordUI":"D054579"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.400"},{"t":"N03.540.052.750.400"},{"t":"N03.540.348.500.500.600.480.400"}]}},{"_id":"57b5d4d3c31425826b8e7acb","_generated":{"RecordName":"National Institute of Arthritis and Musculoskeletal and Skin Diseases (U.S.)","RecordUI":"D054580"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.425"},{"t":"N03.540.052.750.425"},{"t":"N03.540.348.500.500.600.480.425"}]}},{"_id":"57b5d4d3c31425826b8e7acc","_generated":{"RecordName":"National Institute of Biomedical Imaging and Bioengineering (U.S.)","RecordUI":"D054581"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.435"},{"t":"N03.540.052.750.435"},{"t":"N03.540.348.500.500.600.480.435"}]}},{"_id":"57b5d4d3c31425826b8e7acd","_generated":{"RecordName":"National Institute of Child Health and Human Development (U.S.)","RecordUI":"D054582"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.440"},{"t":"N03.540.052.750.440"},{"t":"N03.540.348.500.500.600.480.440"}]}},{"_id":"57b5d4d3c31425826b8e7acf","_generated":{"RecordName":"National Institute of Dental and Craniofacial Research (U.S.)","RecordUI":"D054584"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.445"},{"t":"N03.540.052.750.445"},{"t":"N03.540.348.500.500.600.480.445"}]}},{"_id":"57b5d4d3c31425826b8e7ad1","_generated":{"RecordName":"National Institute of Diabetes and Digestive and Kidney Diseases (U.S.)","RecordUI":"D054586"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.450"},{"t":"N03.540.052.750.450"},{"t":"N03.540.348.500.500.600.480.450"}]}},{"_id":"57b5d4d3c31425826b8e7ad0","_generated":{"RecordName":"National Institute of Environmental Health Sciences (U.S.)","RecordUI":"D054585"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.455"},{"t":"N03.540.052.750.455"},{"t":"N03.540.348.500.500.600.480.455"}]}},{"_id":"57b5d4d3c31425826b8e7ad2","_generated":{"RecordName":"National Institute of General Medical Sciences (U.S.)","RecordUI":"D054587"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.457"},{"t":"N03.540.052.750.457"},{"t":"N03.540.348.500.500.600.480.457"}]}},{"_id":"57b5d437c31425826b8e3e0a","_generated":{"RecordName":"National Institute of Mental Health (U.S.)","RecordUI":"D009315"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.460"},{"t":"N03.540.052.750.460"},{"t":"N03.540.348.500.500.600.480.460"}]}},{"_id":"57b5d4ddc31425826b8e7d1f","_generated":{"RecordName":"National Institute of Neurological Disorders and Stroke","RecordUI":"D055825"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.461"},{"t":"N03.540.052.750.461"},{"t":"N03.540.348.500.500.600.480.461"}]}},{"_id":"57b5d4d3c31425826b8e7ad3","_generated":{"RecordName":"National Institute of Nursing Research (U.S.)","RecordUI":"D054588"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.462"},{"t":"N03.540.052.750.462"},{"t":"N03.540.348.500.500.600.480.462"}]}},{"_id":"57b5d4d3c31425826b8e7ac5","_generated":{"RecordName":"National Institute on Aging (U.S.)","RecordUI":"D054561"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.465"},{"t":"N03.540.052.750.465"},{"t":"N03.540.348.500.500.600.480.465"}]}},{"_id":"57b5d4d3c31425826b8e7ac7","_generated":{"RecordName":"National Institute on Alcohol Abuse and Alcoholism (U.S.)","RecordUI":"D054563"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.467"},{"t":"N03.540.052.750.467"},{"t":"N03.540.348.500.500.600.480.467"}]}},{"_id":"57b5d4d3c31425826b8e7ace","_generated":{"RecordName":"National Institute on Deafness and Other Communication Disorders (U.S.)","RecordUI":"D054583"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.470"},{"t":"N03.540.052.750.470"},{"t":"N03.540.348.500.500.600.480.470"}]}},{"_id":"57b5d4d3c31425826b8e7ac8","_generated":{"RecordName":"National Institute on Drug Abuse (U.S.)","RecordUI":"D054577"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.485"},{"t":"N03.540.052.750.485"},{"t":"N03.540.348.500.500.600.480.485"}]}},{"_id":"57b5d437c31425826b8e3e0c","_generated":{"RecordName":"National Library of Medicine (U.S.)","RecordUI":"D009317"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.490"},{"t":"L01.346.596.563.725"},{"t":"N03.540.052.750.490"},{"t":"N03.540.348.500.500.600.480.490"}]}}],"parents":[{"_id":"57b5d454c31425826b8e4ba3","_generated":{"RecordName":"Social Sciences","RecordUI":"D012942"},"TreeNumberList":{"TreeNumber":[{"t":"F04.096.879"},{"t":"I01"}]}},{"_id":"57b5d418c31425826b8e31fd","_generated":{"RecordName":"Government","RecordUI":"D006076"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409"},{"t":"N03.540.348"}]}},{"_id":"57b5d418c31425826b8e31fe","_generated":{"RecordName":"Government Agencies","RecordUI":"D006077"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418"},{"t":"N03.540.400"}]}},{"_id":"57b5d4b4c31425826b8e6e86","_generated":{"RecordName":"United States Government Agencies","RecordUI":"D037041"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750"},{"t":"N03.540.348.500.500"}]}},{"_id":"57b5d469c31425826b8e5175","_generated":{"RecordName":"United States Dept. of Health and Human Services","RecordUI":"D014483"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600"},{"t":"N03.540.348.500.500.600"}]}},{"_id":"57b5d437c31425826b8e3e0b","_generated":{"RecordName":"National Institutes of Health (U.S.)","RecordUI":"D009316"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480"},{"t":"N03.540.052.750"},{"t":"N03.540.348.500.500.600.480"}]}}]},
  "N03.540.052.750.461":
  {"children":[],"siblings":[{"_id":"57b5e2ee9cd15aea0b49b98b","_generated":{"RecordName":"National Cancer Institute (U.S.)","RecordUI":"D054547"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.150"},{"t":"N03.540.052.750.150"},{"t":"N03.540.348.500.500.600.480.150"}]}},{"_id":"57b5e2ee9cd15aea0b49b98e","_generated":{"RecordName":"National Eye Institute (U.S.)","RecordUI":"D054554"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.200"},{"t":"N03.540.052.750.200"},{"t":"N03.540.348.500.500.600.480.200"}]}},{"_id":"57b5e2ee9cd15aea0b49b98f","_generated":{"RecordName":"National Heart, Lung, and Blood Institute (U.S.)","RecordUI":"D054555"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.300"},{"t":"N03.540.052.750.300"},{"t":"N03.540.348.500.500.600.480.300"}]}},{"_id":"57b5e2ee9cd15aea0b49b994","_generated":{"RecordName":"National Human Genome Research Institute (U.S.)","RecordUI":"D054560"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.325"},{"t":"N03.540.052.750.325"},{"t":"N03.540.348.500.500.600.480.325"}]}},{"_id":"57b5e2ee9cd15aea0b49b99a","_generated":{"RecordName":"National Institute of Allergy and Infectious Diseases (U.S.)","RecordUI":"D054579"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.400"},{"t":"N03.540.052.750.400"},{"t":"N03.540.348.500.500.600.480.400"}]}},{"_id":"57b5e2ee9cd15aea0b49b99b","_generated":{"RecordName":"National Institute of Arthritis and Musculoskeletal and Skin Diseases (U.S.)","RecordUI":"D054580"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.425"},{"t":"N03.540.052.750.425"},{"t":"N03.540.348.500.500.600.480.425"}]}},{"_id":"57b5e2ee9cd15aea0b49b99c","_generated":{"RecordName":"National Institute of Biomedical Imaging and Bioengineering (U.S.)","RecordUI":"D054581"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.435"},{"t":"N03.540.052.750.435"},{"t":"N03.540.348.500.500.600.480.435"}]}},{"_id":"57b5e2ee9cd15aea0b49b99d","_generated":{"RecordName":"National Institute of Child Health and Human Development (U.S.)","RecordUI":"D054582"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.440"},{"t":"N03.540.052.750.440"},{"t":"N03.540.348.500.500.600.480.440"}]}},{"_id":"57b5e2ee9cd15aea0b49b99f","_generated":{"RecordName":"National Institute of Dental and Craniofacial Research (U.S.)","RecordUI":"D054584"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.445"},{"t":"N03.540.052.750.445"},{"t":"N03.540.348.500.500.600.480.445"}]}},{"_id":"57b5e2ee9cd15aea0b49b9a1","_generated":{"RecordName":"National Institute of Diabetes and Digestive and Kidney Diseases (U.S.)","RecordUI":"D054586"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.450"},{"t":"N03.540.052.750.450"},{"t":"N03.540.348.500.500.600.480.450"}]}},{"_id":"57b5e2ee9cd15aea0b49b9a0","_generated":{"RecordName":"National Institute of Environmental Health Sciences (U.S.)","RecordUI":"D054585"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.455"},{"t":"N03.540.052.750.455"},{"t":"N03.540.348.500.500.600.480.455"}]}},{"_id":"57b5e2ee9cd15aea0b49b9a2","_generated":{"RecordName":"National Institute of General Medical Sciences (U.S.)","RecordUI":"D054587"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.457"},{"t":"N03.540.052.750.457"},{"t":"N03.540.348.500.500.600.480.457"}]}},{"_id":"57b5e24c9cd15aea0b497cda","_generated":{"RecordName":"National Institute of Mental Health (U.S.)","RecordUI":"D009315"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.460"},{"t":"N03.540.052.750.460"},{"t":"N03.540.348.500.500.600.480.460"}]}},{"_id":"57b5e2f89cd15aea0b49bbef","_generated":{"RecordName":"National Institute of Neurological Disorders and Stroke","RecordUI":"D055825"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.461"},{"t":"N03.540.052.750.461"},{"t":"N03.540.348.500.500.600.480.461"}]}},{"_id":"57b5e2ee9cd15aea0b49b9a3","_generated":{"RecordName":"National Institute of Nursing Research (U.S.)","RecordUI":"D054588"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.462"},{"t":"N03.540.052.750.462"},{"t":"N03.540.348.500.500.600.480.462"}]}},{"_id":"57b5e2ee9cd15aea0b49b995","_generated":{"RecordName":"National Institute on Aging (U.S.)","RecordUI":"D054561"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.465"},{"t":"N03.540.052.750.465"},{"t":"N03.540.348.500.500.600.480.465"}]}},{"_id":"57b5e2ee9cd15aea0b49b997","_generated":{"RecordName":"National Institute on Alcohol Abuse and Alcoholism (U.S.)","RecordUI":"D054563"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.467"},{"t":"N03.540.052.750.467"},{"t":"N03.540.348.500.500.600.480.467"}]}},{"_id":"57b5e2ee9cd15aea0b49b99e","_generated":{"RecordName":"National Institute on Deafness and Other Communication Disorders (U.S.)","RecordUI":"D054583"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.470"},{"t":"N03.540.052.750.470"},{"t":"N03.540.348.500.500.600.480.470"}]}},{"_id":"57b5e2ee9cd15aea0b49b998","_generated":{"RecordName":"National Institute on Drug Abuse (U.S.)","RecordUI":"D054577"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.485"},{"t":"N03.540.052.750.485"},{"t":"N03.540.348.500.500.600.480.485"}]}},{"_id":"57b5e24c9cd15aea0b497cdc","_generated":{"RecordName":"National Library of Medicine (U.S.)","RecordUI":"D009317"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480.490"},{"t":"L01.346.596.563.725"},{"t":"N03.540.052.750.490"},{"t":"N03.540.348.500.500.600.480.490"}]}}],"parents":[{"_id":"57b5e2169cd15aea0b496ac9","_generated":{"RecordName":"Health Care Economics and Organizations","RecordUI":"D004472"},"TreeNumberList":{"TreeNumber":[{"t":"N03"}]}},{"_id":"57b5e24c9cd15aea0b497f31","_generated":{"RecordName":"Organizations","RecordUI":"D009938"},"TreeNumberList":{"TreeNumber":[{"t":"N03.540"}]}},{"_id":"57b5e1ea9cd15aea0b495896","_generated":{"RecordName":"Academies and Institutes","RecordUI":"D000047"},"TreeNumberList":{"TreeNumber":[{"t":"N03.540.052"}]}},{"_id":"57b5e24c9cd15aea0b497cdb","_generated":{"RecordName":"National Institutes of Health (U.S.)","RecordUI":"D009316"},"TreeNumberList":{"TreeNumber":[{"t":"I01.409.418.750.600.480"},{"t":"N03.540.052.750"},{"t":"N03.540.348.500.500.600.480"}]}}]}
};

app.get("/api/fieldSearch/record", function (req, res) {
    console.log("q = " + req.query.q)
    res.send(meshRecordSearch[req.query.q]);
});

app.get("/api/record/ui/:desc", function (req, res) {
    res.send(meshUiRecords[req.params.desc]);
});

app.get("/api/tree/:tn", function (req, res) {
    res.send(meshTrees[req.params.tn]);
});

// Mocks UTS ticket validation process
app.post('/cas/serviceValidate', function(req, res) {
    if( req.query.ticket === 'invalid' ) {
        res.send("<cas:serviceResponse xmlns:cas='http://www.yale.edu/tp/cas'> <cas:authenticationFailure code='INVALID_TICKET'>ticket &#039;ST-430048-3Em71CBricwWoL7bd5nc-cas&#039; not recognized </cas:authenticationFailure></cas:serviceResponse>");
    } else if( req.query.ticket === 'valid' ) {
        res.send("<cas:serviceResponse xmlns:cas='http://www.yale.edu/tp/cas'> <cas:authenticationSuccess> <cas:user>ninds</cas:user> </cas:authenticationSuccess> </cas:serviceResponse>");
    } else if( req.query.ticket === 'timeout1' ) {
        // Return after 1 sec, ticket validation times out after 2 sec, ticket validation passes
        setTimeout(function() {
            res.send("<cas:serviceResponse xmlns:cas='http://www.yale.edu/tp/cas'> <cas:authenticationSuccess> <cas:user>ninds</cas:user> </cas:authenticationSuccess> </cas:serviceResponse>");
        }, 1000);
    } else if( req.query.ticket === 'timeout4' ) {
        // Return after 4 sec, ticket validation times out after 2 sec, ticket validation doesn't pass
        setTimeout(function() {
            res.send("<cas:serviceResponse xmlns:cas='http://www.yale.edu/tp/cas'> <cas:authenticationSuccess> <cas:user>ninds</cas:user> </cas:authenticationSuccess> </cas:serviceResponse>");
        }, 4000);
    }
});

var options = {
  key: fs.readFileSync(path.join(__dirname, './server.key')),
  cert: fs.readFileSync(path.join(__dirname, './server.crt'))
};

https.createServer(options, app).listen(app.get('port'), function(){
  console.log('VSAC Mock listening on port: ' + app.get('port'));
});

var net = require('net');
var server = net.createServer(function(c) { 
    var malicious = false;
    console.log('Scan connection started');
    var file = new Buffer(1024*1024*5);
    c.on('data', function(data) {
        file += data;

        var array = JSON.parse(JSON.stringify(data));
        try {
            var last4;
            if (array.data) last4 = array.data.slice(-4);
            else last4 = array.slice(-4);
            if (last4.length < 4) return;
            for (var i = 0; i < 3; i++) if (last4[i] !== 0) return;

            if (file.toString().indexOf("VIRUS") > -1) {
                malicious = true;
                console.log("setting malicious = true");
            }

            if (malicious) console.log("stream: A FOUND\n");
            else console.log("stream: OK\n");

            if (malicious) c.write("stream: A FOUND\n");
            else c.write("stream: OK\n");
        } catch (e) {
            if (malicious) console.log("stream: A FOUND\n");
            else console.log("stream: OK\n");

            if (malicious) c.write("stream: A FOUND\n");
            else c.write("stream: OK\n");
        }
    });
    c.on("end", function() {
        console.log("Scan connection closed");
    });
    c.on("error", function(err) {
        console.log(err);
    });    
});
server.listen(config.antivirus.port, function() { 
    console.log('ClamAV Fake daemon open on port: ' + config.antivirus.port);
});