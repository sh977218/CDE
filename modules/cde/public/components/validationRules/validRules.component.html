<div id="validRulesDiv">
    <h4 id="regStatusValidationRules">Validation Rules</h4>

    <ng-container *ngIf="hasRules(); else noRules">
        The <b>Registration Status</b> of this CDE is <b>{{elt.registrationState.registrationStatus}}</b>.<br>
        This CDE is used by the following <b>Stewards</b>: {{elt.usedBy?.join(', ')}}<br>
        In order to promote this CDE to a different registration status, it must obey the following validation rules:
        <div *ngFor="let regStatusName of keys(results)" [hidden]="!showStatus(cdeStatusRules[regStatusName])"
             class="pb-2">
            <h3>Validation Rules for {{regStatusName}} Status</h3>
            <div *ngFor="let orgName of keys(results[regStatusName])">
                <h5>Steward <b>{{orgName}}</b> requires the following conditions to be met, in order to promote this
                    CDE to <b>{{regStatusName}}</b> status:</h5>
                <div *ngFor="let result of results[regStatusName][orgName]; let i=index"
                     id="rule_{{regStatusName}}_{{i}}">
                    {{result.name}}
                    <ng-container [ngSwitch]="result.result">
                        <ng-container *ngSwitchCase="undefined">
                            <mat-icon class="spin">autorenew</mat-icon>
                        </ng-container>
                        <ng-container *ngSwitchCase="''">
                            <mat-icon class="text-success">check</mat-icon>
                        </ng-container>
                        <ng-container *ngSwitchDefault>
                            <mat-icon class="text-danger">cancel</mat-icon> {{ result.result }}
                        </ng-container>
                    </ng-container>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-template #noRules>
        There are no validation rules for this CDE.
    </ng-template>
</div>
