<div ng-controller="CdeHistoryCtrl">
    <h4>History</h4>
    <div class="row">
        <div class="col-md-4" ng-show="priorCdes.length > 0">
        <input id="showVersionedHistory" type="checkbox" ng-model="showVersioned">
        <label for="showVersionedHistory">Only show versioned revisions.</label>
            <table class="table" id="historyTable">
                <caption>List of previous versions. Click rows to select them.
                <button ng-if="selectedIds.length === 2" id="historyCompareBtn"
                        class="btn btn-default" ng-click="viewDiff()">
                    <i class="fa fa-files-o"></i> Compare</button>

            </caption>
            <thead>
            <tr>
                <th>Updated</th>
                <th>Updated by</th>
                <th>Change Note</th>
                <th>Version:</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="priorCde in priorCdes track by $index"
                ng-show="!showVersioned || priorCde.version !== priorCdes[$index-1].version">
                <td>
                    <i class="fa fa-check-square-o" ng-click="setSelected(priorCde._id);"
                       ng-if="isSelected(priorCde._id)" aria-hidden="true"></i>
                    <i class="fa fa-square-o" ng-click="setSelected(priorCde._id);"
                       ng-if="!isSelected(priorCde._id)" aria-hidden="true"></i>
                    {{priorCde.updated | date: 'MM/dd/yyyy @ h:mma'}}
                    <a href="/#/deview?cdeId={{priorCde._id}}" id="prior-{{$index}}" class="fa fa-eye"
                       target="_blank" ng-if="$index > 0">View</a>
                </td>
                <td>{{priorCde.updatedBy.username}}</td>
                <td>{{priorCde.changeNote}}</td>
                <td>{{priorCde.version}}</td>
            </tr>
            </tbody>

        </table>
    </div>
        <div class="col-md-4" ng-hide="priorCdes.length > 0">This Data Element has no history</div>
    <div class="col-md-8">
        <div ng-include="'/system/public/html/historyCompare.html'"></div>
    </div>
    </div>
</div>
