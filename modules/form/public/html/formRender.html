<!DOCTYPE html>
<html lang="en" ng-app="FormRenderer">

  <head>
    <meta charset="utf-8" />
    <title>Form View</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!-- Le styles -->
    <link href="/cde/public/assets/css/bootstrap.min.css" data-require="bootstrap-css" rel="stylesheet" />
    <!-- <link data-require="bootstrap@*" data-semver="3.2.0" rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.css" /> -->
    <style>
      body {
        padding-top: 60px;
      }
      @media (max-width: 979px) {

        /* Remove any padding from the body */
        body {
          padding-top: 0;
        }
      }
    </style>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="images/favicon.ico" />
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png" />
    <link href="/cde/public/assets/css/font-awesome.min.css" rel="stylesheet">
    <!-- Le javascript
    ================================================== -->
    <script src="/cde/public/assets/js/angular.min.js"></script>
    <script src="/cde/public/assets/js/angular-route.min.js"></script>
    <script src="/cde/public/assets/js/jquery.min.js"></script>
    <script src="/cde/public/assets/js/bootstrap.min.js" data-require="bootstrap"></script>
    <script src="/cde/public/assets/js/jquery-ui.min.js"></script>        
    <script src="/form/public/js/controllers/FormRenderer.js"></script>
    <script src="/cde/public/assets/js/ui-bootstrap-tpls.js"></script>
  </head>

  <body ng-controller="FormRenderCtrl">
      <div class="container-fluid">
          <h2>{{myForm.naming[0].designation}}</h2>
          <form ng-repeat="section in myForm.formElements track by $index" name="sectionLabel" role="form" class="form-inline">
              <div class="panel panel-default">
                  <div class="panel-heading">
                      <div class="row">
                        <div class="col-md-9">
                          <h4>{{section.label}}</h4>
                          <p>{{section.instructions}}</p>
                        </div>
                        <div class="col-md-3" ng-if="canRepeat(section)">
                            <button class="btn btn-default fa fa-plus" ng-click="addSection($index)"> Add One</button>
                            <button ng-if="section.isCopy" class="btn btn-default fa fa-trash-o" ng-click="removeSection($index)"> Remove</button>
                        </div>
                      </div>
                  </div>
                  <div class="panel-body">
                    <div ng-repeat="question in section.formElements" class="row">
                        <div class="col-md-3">
                          <label>{{question.label}}</label>                      
                        </div>
                        <div ng-switch="question.question.datatype" class="col-md-9">
                            <select ng-switch-when="Value List" class="form-control" ng-model="question.question.answer">
                                <option ng-repeat="answer in question.question.answers" >{{answer.valueMeaningName}}</option>
                                <option ng-if="question.question.otherPleaseSpecify.value" value="otherPleaseSpecify">Other</option>
                            </select>
                            <input ng-if="question.question.answer === 'otherPleaseSpecify'" type="text" class="form-control" required placeholder="Please Specify" ng-model="question.question.otherPleaseSpecify.answer" name="Please Specify"/>
                            <input ng-switch-when="Date" class="form-control" datepicker-popup="dd-MMMM-yyyy" type="text" required ng-model="question.question.answer"/>
                            <span ng-switch-default class="form-group">
                              <input type="text" class="form-control" required ng-model="question.question.answer" name=""/>
                              <select class="form-control" ng-if="question.question.uoms.length > 0" ng-model="question.question.answerUom" ng-init="question.question.answerUom = question.question.uoms[0]">
                                  <option ng-repeat="uom in question.question.uoms">{{uom}}</option>
                              </select>                                
                            </span>
                        </div>
                    </div>
                  </div>
              </div>
        </form>
        <a class="btn btn-default btn-success fa fa-external-link" target="_blank" id="exportLink" ng-click="exportStr()" href="{{encodedStr}}" download="form-data.json"> Export</a>                     
      </div>
  </body>
</html>
