<div uib-accordion close-others="false" ng-class="accordionListStyle" id="formQuestion_{{question.label}}">
    <div uib-accordion-group is-open="">
        <div uib-accordion-heading>
            <div class="row">
                <div class="col-sm-1 section-question-icon-div">
                    <i ng-if="canCurate" class="fa fa-arrows question-move-handle"></i>
                </div>
                <div class="col-sm-10">
                    <div ng-if="question.question.isScore"><strong>Score: </strong></div>
                    <div ng-bind-html="question.label | placeholdEmpty"
                         id="question_accordion_{{sectionIndex}}_{{questionIndex}}" class="hand-cursor"></div>
                    <div ng-if="inScoreCdes.indexOf(question.question.cde.tinyId) > -1" class="text-info">
                        <small>(part of score)</small>
                    </div>
                    <div ng-if="question.question.cde.outdated" class="error-block"> (Outdated)</div>
                    <div ng-if="question.incompleteRule" class="error-block"> (Incomplete Rule)</div>
                </div>
                <div class="col-sm-1 pull-right section-icon-div">
                    <i class="glyphicon glyphicon-remove hand-cursor pull-right"
                       ng-click="removeQuestion(parent, $index)"
                       title="Remove question" ng-show="canCurate" id="remove_q_{{$index}}"></i>
                </div>
            </div>

        </div>
        <div class="row questionAccordionContent">
            <div class="col-sm-12">
                <div class="row">
                    <div class="col-sm-2 questionSectionLabel text-right">Label:</div>
                    <div class="col-sm-7" id="dd_question_title_{{$index}}">
                        <i ng-show="canCurate" class="fa fa-pencil" title="Change question label"
                           ng-click="openNameSelect(question)"></i>
                        {{question.label | placeholdEmpty}}
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2 questionSectionLabel text-right">Instructions:</div>
                    <div class="col-sm-7" id="dd_question_instructions_{{$index}}">
                        <div inline-edit model="question.instructions" is-allowed="canCurate" on-ok="stageElt()"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2 questionSectionLabel text-right">Required:</div>
                    <div class="col-sm-7" id="dd_question_required_{{$index}}">
                        <input type="checkbox" ng-model="question.question.required" ng-disabled="!canCurate"
                               ng-click="stageElt()"/>
                    </div>
                </div>
                <div class="row" ng-if="isScore(question)">
                    <div class="col-sm-2 questionSectionLabel text-right">Score:</div>
                    <div class="col-sm-7" id="dd_question_score_{{$index}}">
                        <span ng-bind="question.question.scoreFormula"></span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2 questionSectionLabel text-right">Cardinality:</div>
                    <div class="col-sm-7" id="dd_q_card_{{$index}}">
                        <div ng-show="editCardMode">
                            <select ng-model="question.cardinality"
                                    ng-options="key as value for (key, value) in cardinalityOptions"
                                    id="question.cardinality"></select>
                            <br/>
                            <button class="fa fa-check" ng-click="editCardMode = false; stageElt()" id="confirmCard">
                                Confirm
                            </button>
                            <button class="fa fa-times" ng-click="editCardMode = false; question.cardinality = orig">
                                Discard
                            </button>
                        </div>
                        <div ng-hide="editCardMode">
                            <i ng-show="canCurate" class="fa fa-edit"
                               ng-click="editCardMode = true; orig = question.cardinality"
                               id="editQuestion"></i> {{cardinalityOptions[question.cardinality]}}
                        </div>
                    </div>
                </div>
                <div class="row" ng-if="parent">
                    <div class="col-sm-2 questionSectionLabel text-right">Show if:</div>
                    <div class="col-sm-7">
                        <input type="text" ng-change="stageElt(elt)" ng-model="question.skipLogic.condition"
                               uib-typeahead="opt for opt in getCurrentOptions($viewValue, section.formElements, question)"
                               typeahead-min-length="0" class="form-control skipLogicCondition"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2 questionSectionLabel text-right">Datatype:</div>
                    <div class="col-sm-7" id="dd_datatype_{{$index}}">
                        {{question.question.datatype | placeholdEmpty }}
                    </div>
                </div>
                <div class="row" ng-if="question.question.datatype ==='Number'">
                    <div class="col-sm-2 questionSectionLabel text-right">Minimal Value:</div>
                    <div class="col-sm-7" id="dd_minimal_{{$index}}">
                        {{question.question.datatypeNumber.minValue | placeholdEmpty }}
                    </div>
                </div>
                <div class="row" ng-if="question.question.datatype ==='Number'">
                    <div class="col-sm-2 questionSectionLabel text-right">Maximal Value:</div>
                    <div class="col-sm-7" id="dd_maximal_{{$index}}">
                        {{question.question.datatypeNumber.maxValue | placeholdEmpty }}
                    </div>
                </div>

                <div class="row" ng-show="question.question.datatype === 'Value List'">
                    <div class="col-sm-2 questionSectionLabel text-right">Multiple Selections:</div>
                    <div class="col-sm-7" id="dd_question_multi_{{$index}}">
                        <input type="checkbox" ng-model="question.question.multiselect" ng-disabled="!canCurate"
                               ng-click="stageElt()"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2 questionSectionLabel text-right">Units of Measures:</div>
                    <div class="col-sm-7" ng-switch="question.question.uoms.length > 0" id="dd_q_uoms_{{$index}}">
                        <div ng-switch-when="true">
                            <span ng-repeat="uom in question.question.uoms">
                                <div id="q_uom_list_{{$index}}" inline-edit model="question.question.uoms[$index]"
                                     is-allowed="canCurate" on-ok="checkUom(question, $index)"></div>
                            </span>
                        </div>
                        <div ng-switch-default>N/A</div>
                        <button ng-show="canAddUom(question)" class="btn btn-default btn-xs"
                                ng-click="addUom(question)"><i class="fa fa-plus"></i> Add
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-2 questionSectionLabel text-right">CDE:</div>
                    <div class="col-sm-7" id="dd_d_cde_{{$index}}">
                        <a href="/#/deview?tinyId={{question.question.cde.tinyId}}&version={{question.question.cde.version}}"
                           target="_blank"><i class="fa fa-eye"></i> View</a>
                    </div>
                </div>
            </div>
            <div class="col-sm-7 answerList" ng-if="question.question.datatype === 'Value List'">
                <div tabindex="0"><strong>Answer List:</strong></div>
                <div class="panel-body">
                    <ui-select multiple ng-model="question.question.answers" theme="select2" ng-disabled="!canCurate"
                               style="min-width: 125px" on-remove="stageElt()" on-select="stageElt()">
                        <ui-select-match placeholder="Select answers...">{{$item.valueMeaningName}}</ui-select-match>
                        <ui-select-choices
                                repeat="pv in question.question.cde.permissibleValues | filter:$select.search track by pv.valueMeaningName">
                            {{pv.valueMeaningName}}
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </div>
    </div>
</div>