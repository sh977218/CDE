<!doctype html>
<html lang="en">
<head>
    <title>LForms / NIH CDE Repository</title>
    <link  rel="stylesheet" href="https://clin-table-search.lhc.nlm.nih.gov/lforms-versions/11.2.1/styles/lforms.min.css"/>
</head>
<body >

<div id="myFormContainer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/oboe@2.1.4/dist/oboe-browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/object-traverse@1.1.1/index.min.js"></script>

<script src="https://clin-table-search.lhc.nlm.nih.gov/lforms-versions/11.2.1/lforms.min.js"></script>
<script src="/form/public/assets/traverse.js"></script>
<script src="/form/public/assets/ast.js"></script>
<script src="/form/public/assets/skl-parser.js"></script>
<script src="/form/public/assets/skl-condition-parser.js"></script>
<script src="/form/public/assets/lforms-converter.js"></script>

<script language="JavaScript">

    $.urlParam = function(name){
        var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
        if (results == null){
            return null;
        }
        else{
            return decodeURI(results[1]) || 0;
        }
    };

    $(document).ready(function () {
        var converter = new LForms.LFormsConverter();

        converter.convert("/form/" + $.urlParam('tinyId'),
            function(lfData) {
                window.myFormDefinition = lfData;
                LForms.Util.addFormToPage('myFormDefinition', 'myFormContainer');
            },
            function(err) {
                scope.error = err;
            }
        );
    });

</script>
</body>
</html>
