<div class="container-fluid" *ngIf="deTableData">
    <h1>{{title}}</h1>
    <div>
        <h2>Data Elements</h2>
        <span *ngIf="!deTableData?.data?.length; else deDrafts">There are no CDE drafts.</span>
        <ng-template #deDrafts>
            <cde-tag placeHolder="Filter by Organization" [tags]="deFilterOrgs" [allTags]="deOrgs"
                     [canEdit]="true" (changed)="onDeFilter()"></cde-tag>
            <table mat-table *ngIf="deTableData?.data?.length" [dataSource]="deTableData" matSort #deTable>
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef class="pr-3">Data Element</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3">
                        <a routerLink="/deView" [queryParams]="{tinyId: draft.tinyId}">
                            {{draft.designations[0].designation}}</a>
                    </td>
                </ng-container>
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="pr-3">Id</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3" >{{draft.tinyId}}</td>
                </ng-container>
                <ng-container matColumnDef="updatedBy">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="pr-3">Updated By</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3">{{draft.updatedBy?.username}}</td>
                </ng-container>
                <ng-container matColumnDef="updatedDate">
                    <th mat-header-cell *matHeaderCellDef class="pr-3">Updated Date</th>
                    <td mat-cell *matCellDef="let draft"
                        class="pr-3">{{draft.updated | date: 'MM/dd/yyyy @ h:mma'}}</td>
                </ng-container>
                <ng-container matColumnDef="organization">
                    <th mat-header-cell *matHeaderCellDef class="pr-3">Organization</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3">{{draft.stewardOrg?.name}}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="draftColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: draftColumns"></tr>
            </table>
            <mat-paginator #dePage [pageSizeOptions]="[25, 50, 100]"></mat-paginator>
        </ng-template>
    </div>
    <div>
        <h2>Forms</h2>
        <span *ngIf="!formTableData?.data?.length; else formDrafts">There are no Form drafts.</span>
        <ng-template #formDrafts>
            <cde-tag placeHolder="Filter by Organization" [tags]="formFilterOrgs" [allTags]="formOrgs"
                     [canEdit]="true" (changed)="onFormFilter()"></cde-tag>
            <table mat-table [dataSource]="formTableData" matSort #formTable>
                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef class="pr-3"> Form</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3">
                        <a routerLink="/formView" [queryParams]="{tinyId: draft.tinyId}">
                            {{draft.designations[0].designation}}</a>
                    </td>
                </ng-container>
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="pr-3">Id</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3">{{draft.tinyId}}</td>
                </ng-container>
                <ng-container matColumnDef="updatedBy">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header class="pr-3">Updated By</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3">{{draft.updatedBy?.username}}</td>
                </ng-container>
                <ng-container matColumnDef="updatedDate">
                    <th mat-header-cell *matHeaderCellDef class="pr-3"> Updated Date</th>
                    <td mat-cell *matCellDef="let draft"
                        class="pr-3">{{draft.updated | date: 'MM/dd/yyyy @ h:mma'}}</td>
                </ng-container>
                <ng-container matColumnDef="organization">
                    <th mat-header-cell *matHeaderCellDef class="pr-3">Organization</th>
                    <td mat-cell *matCellDef="let draft" class="pr-3">{{draft.stewardOrg?.name}}</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="draftColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: draftColumns"></tr>
            </table>
            <mat-paginator #formPage [pageSizeOptions]="[25, 50, 100]"></mat-paginator>
        </ng-template>
    </div>
</div>
