<div class="container-fluid">
    <mat-checkbox [(ngModel)]="includeBatch" (ngModelChange)="gotoPageLocal()">
        Include Batchloader changes
    </mat-checkbox>
</div>
<mat-accordion>
    <mat-expansion-panel *ngFor="let edit of records">
        <mat-expansion-panel-header>
            <mat-panel-title>
                {{edit.adminItem.name}}
            </mat-panel-title>
            <mat-panel-description>
                <span class="matched-by">{{edit.date | date : 'MMM d, y, h:mm a' }}</span>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <dl class="cde-property">
            <dt>User:</dt>
            <dd>{{edit.user.username}}</dd>
            <dt>Date:</dt>
            <dd>{{edit.date | date : 'MMM d, y, h:mm a'}}</dd>
            <dt>CDE - New Version:</dt>
            <dd>
                <a target="_blank" href="/deView?cdeId={{edit.adminItem._id}}">{{edit.adminItem.name}}</a>
            </dd>
            <ng-container *ngIf="edit.previousItem">
                <dt>CDE - Previous Version:</dt>
                <dd>
                    <a target="_blank" href="/deView?cdeId={{edit.previousItem._id}}">{{edit.previousItem.name}}</a>
                </dd>
            </ng-container>
        </dl>
        <table *ngIf="edit.diff" class="table">
            <caption>List of Modifications</caption>
            <thead>
            <tr>
                <th>Field</th>
                <th>Type of Modification</th>
                <th>Change</th>
            </tr>
            </thead>
            <ng-container *ngFor="let d of edit.diff">
                <tr *ngIf="!ignoredDiff(d)">
                    <td>{{d.fieldName}}</td>
                    <td>{{d.modificationType}}</td>
                    <td>
                        <td-ngx-text-diff [showToolbar]='false' [showBtnToolbar]='false' [left]="d.previousValue || ''"
                                          [right]="d.newValue || ''"
                                          [format]="'LineByLine'"></td-ngx-text-diff>
                    </td>
                </tr>
            </ng-container>
        </table>
    </mat-expansion-panel>
</mat-accordion>

<mat-paginator style="font-size: 1.4em" (page)="gotoPageLocal($event)" [length]="1000"
               [pageIndex]="currentPage" [pageSize]="pageSize" [hidePageSize]="true">
</mat-paginator>
