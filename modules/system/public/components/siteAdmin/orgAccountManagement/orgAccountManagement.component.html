<div class="container">
    <mat-tab-group>
        <mat-tab label="Organizations Admins">
            <cde-org-admin></cde-org-admin>
        </mat-tab>
        <mat-tab label="Organizations Curators">
            <form class="form-inline pt40 pb40" #newCuratorForm="ngForm" id="newOrgCuratorForm" novalidate>
                <span class="mr-2"></span>
                <div class="form-group">
                    <cde-username-autocomplete [placeHolder]="'enter username'"
                                               (onSelect)="newUsername = $event"></cde-username-autocomplete>
                </div>
                <span class="mx-2">a curator for</span>
                <div *ngIf="userService.user" class="form-group">
                    <select id="newOrgCuratorOrgName" name="newOrgCuratorOrgName" class="form-control"
                            [(ngModel)]="newOrgName" required>
                        <option value="">select organization</option>
                        <option *ngFor="let myOrg of userService.user.orgAdmin">{{myOrg}}</option>
                    </select>
                </div>
                <button type="submit" id="newOrgCuratorSubmit" (click)="addOrgCurator()"
                        [disabled]="!newCuratorForm.valid" mat-raised-button color="primary">
                    Make Curator
                </button>
            </form>
            <table class="table table-border">
                <tr>
                    <th>Organization Name:</th>
                    <th>Curators for this Organization:</th>
                </tr>
                <tr *ngFor="let orgCurator of orgCurators; let $pindex = index">
                    <td id="existingOrgCuratorOrgName-{{orgCurator.name}}">{{orgCurator.name}}</td>
                    <td>
                        <div *ngFor="let user of orgCurator.users; let $index = index">
                            <span id="existingOrgCuratorUsername-{{$pindex}}-{{$index}}">{{user.username}}</span>
                            <mat-icon (click)="removeOrgCurator(orgCurator.name, user._id)"
                                      id="removeOrgCuratorUsername-{{$pindex}}-{{$index}}">delete_outline
                            </mat-icon>
                        </div>
                    </td>
                </tr>
            </table>
        </mat-tab>
        <mat-tab label="CDE & Form Management" *ngIf="userService.user?.orgAdmin.length > 1">
            <form class="form-inline pt40 pb40" role="form" id="transferStewardForm" name="transferStewardForm"
                  novalidate>
                <span class="mr-2">Transfer CDEs and forms owned by</span>
                <div class="form-group">
                    <select id="transferSteward_from" name="transferSteward_from" class="form-control"
                            [(ngModel)]="transferStewardObj.from" required>
                        <option value="">select organization</option>
                        <option *ngFor="let myOrg of userService.user.orgAdmin">{{myOrg}}</option>
                    </select>
                </div>
                <span class="mx-2">to</span>
                <div class="form-group">
                    <select id="transferSteward_to" name="transferSteward_to" class="form-control"
                            [(ngModel)]="transferStewardObj.to" required>
                        <option value="">select organization</option>
                        <option *ngFor="let myOrg of userService.user.orgAdmin">{{myOrg}}</option>
                    </select>
                </div>
                <button type="submit" id="transferStewardButton" mat-raised-button (click)="transferSteward()"
                        ng-disabled="transferStewardForm.transferSteward_from.$error.required || transferStewardForm.transferSteward_to.$error.required">
                    Transfer Now
                </button>
            </form>
        </mat-tab>
        <mat-tab label="Drafts">
            <cde-drafts-org-list></cde-drafts-org-list>
        </mat-tab>
        <mat-tab label="Embedding" *ngIf="userService.user?.orgAdmin.length > 0">
            <cde-embed></cde-embed>
        </mat-tab>
    </mat-tab-group>
</div>
