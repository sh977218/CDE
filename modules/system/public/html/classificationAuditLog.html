<uib-accordion>
    <div uib-accordion-group class='panel-default' ng-repeat="edit in records">
        <uib-accordion-heading>
            <span ng-switch="edit.elements.length">
                <span ng-switch-when="1">{{edit.elements[0].name}}</span>
                <span ng-switch-when="10">10+ elements</span>
                <span ng-switch-default>{{edit.elements.length}} elements</span>
            </span>
            <span class="text-info">{{edit.path.join(" > ")}}</span>
            <span class="matched-by">{{edit.date | date : 'MMM d, y, h:mm a' }}</span>
        </uib-accordion-heading>
        <dl class="dl-horizontal">
            <dt>User</dt>
            <dd>{{edit.user.username}}</dd>
            <dt>Date</dt>
            <dd>{{edit.date | date : 'MMM d, y, h:mm a'}}</dd>
            <dt>
                <span ng-if="edit.elements.length === 1">Element</span>
                <span ng-if="edit.elements.length > 1">Elements</span></dt>
            <dd>
                <span ng-if="edit.elements.length>1">{{edit.elements.length}} elements: </span>
                <span ng-repeat="e in edit.elements track by $index" ng-switch="e.eltType">
                    <span ng-switch-when="cde">
                        <a ng-if="e._id" target="_blank" href="/deview?cdeId={{e._id}}">{{e.name || "Element " +  ($index + 1)}}</a>
                        <a ng-if="e.tinyId" target="_blank" href="/deview?tinyId={{e.tinyId}}">{{e.name || "Element " +  ($index + 1)}}</a>
                    </span>
                    <span ng-switch-when="form">
                        <a ng-if="e._id" target="_blank" href="/formView?formId={{e._id}}">{{e.name || "Element " +  ($index + 1)}}</a>
                        <a ng-if="e.tinyId" target="_blank" href="/formView?tinyId={{e.tinyId}}">{{e.name || "Element " +  ($index + 1)}}</a>
                    </span>
                    <span ng-if="$index < edit.elements.length-1">, </span>
                </span>
            </dd>
            <dt ng-if="edit.elements.length === 1">Registration Status</dt>
            <dd ng-if="edit.elements.length === 1">{{edit.elements[0].status}}</dd>
            <dt>Classification</dt>
            <dd>{{edit.action | camelCaseToHuman}} <span class="text-danger">{{edit.path.join(" > ")}}</span> <span ng-if="edit.action === 'rename'"> to <span class='text-danger'>{{edit.newname}}</span></span></dd>
        </dl>
    </div>
</uib-accordion>

<ul uib-pagination total-items="1000" ng-model="currentPage" ng-change="gotoPageLocal(currentPage)" max-size="10"></ul>