<div class="container-fluid">
    <script type='text/ng-template' id="mailTemplate">
    <accordion ng-repeat="message in mail[type]" close-others="oneAtATime">
        <accordion-group>
            <accordion-heading>
                {{message.date | date : medium}} | {{message.type}} | {{message.typeRequest.destination.object.naming[0].designation}} | {{message.author.name}}
            </accordion-heading>

            <div ng-if="message.type=='MergeRequest'" ng-include="'/cde/public/html/mergeRequestMessage.html'" ng-init="orgName = orgToManage; page = 'management';"></div>
            <div ng-if="message.type=='CommentApproval'" ng-include="'/system/public/html/messages/commentApproval.html'" ng-init="orgName = orgToManage; page = 'management';"></div>

            <span ng-show="type==mailTypeReceived">
                <button ng-controller="MergeApproveCtrl" ng-click="showMergeApproveDialog(message)" ng-class="{disabled: message.states[0].action==='Approved'}" class="btn btn-sm btn-default" type="button" >Approve & Merge</button>
                <span ng-show="message.states[0].action==='Approved'">Approved on {{ message.states[0].date | date:medium }}</span>
            </span>
        </accordion-group>
    </accordion>
    </script>
    <h4 ng-show='mail[mailTypeReceived].length==0 && mail[mailTypeSent].length==0 && mail[mailTypeArchived].length==0'><center>Your Inbox is empty.</center></h4>
    <div ng-repeat="type in [mailTypeReceived, mailTypeSent, mailTypeArchived]">
        <h3 ng-show="type==mailTypeReceived && mail[type].length>0">Received</h3>
        <h3 ng-show="type==mailTypeSent && mail[type].length>0">Sent</h3>
        <h3 ng-show="type==mailTypeArchived && mail[type].length>0">Archived</h3>    
       <div ng-include src="'mailTemplate'"></div>
    </div>

</div>    