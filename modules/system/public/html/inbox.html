<div class="container-fluid">
    <script type='text/ng-template' id="mailTemplate">
    <uib-accordion ng-repeat="message in mail[type] | orderBy: 'date' : true" close-others="oneAtATime">

        <uib-accordion-group ng-if="message.type === 'MergeRequest'">
            <uib-accordion-heading>
                {{message.date | date : medium}} | {{message.type | camelCaseToHuman}} |
                {{message.typeRequest.destination.object.naming[0].designation}} | {{message.author.name}}
            </uib-accordion-heading>
            <div ng-include="'/cde/public/html/mergeRequestMessage.html'" ng-init="orgName = orgToManage; page = 'management';"></div>
        </uib-accordion-group>

        <uib-accordion-group ng-if="message.type === 'CommentApproval'">
            <uib-accordion-heading>
                {{message.date | date : medium}} | {{message.type | camelCaseToHuman}} | {{message.author.name}} |
                {{message.typeCommentApproval.comment.text | limitTo : 30}}
            </uib-accordion-heading>
            <div ng-include="'/system/public/html/messages/commentApproval.html'" ng-init="orgName = orgToManage; page = 'management';"></div>
        </uib-accordion-group>

        <uib-accordion-group ng-if="message.type === 'AttachmentApproval'">
            <uib-accordion-heading>
                {{message.date | date : medium}} | {{message.type | camelCaseToHuman}} ( {{message.typeAttachmentApproval.filename}} ) | {{message.author.name}}
            </uib-accordion-heading>
            <div ng-include="'/system/public/html/attachmentApproval.html'" ng-init="orgName = orgToManage; page = 'management';"></div>
        </uib-accordion-group>

    </uib-accordion>
    </script>
    <h4 ng-show='mail[mailTypeReceived].length==0 && mail[mailTypeSent].length==0 && mail[mailTypeArchived].length==0'><center>Your Inbox is empty.</center></h4>
    <div ng-repeat="type in [mailTypeReceived, mailTypeSent, mailTypeArchived]" id="mail_{{type}}">
        <h3 ng-show="type==mailTypeReceived && mail[type].length>0">Received</h3>
        <h3 ng-show="type==mailTypeSent && mail[type].length>0">Sent</h3>
        <h3 ng-show="type==mailTypeArchived && mail[type].length>0">Archived</h3>    
       <div ng-include src="'mailTemplate'"></div>
    </div>

</div>    