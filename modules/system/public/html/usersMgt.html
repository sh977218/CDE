<div ng-controller="UsersMgtCtrl">

    <button class="btn btn-default" ng-click="openCreateUser()" id="createUser">
        <i class="fa fa-plus-square-o"></i> Create User</button>

    <form class="form-inline pt40 pb40" role="form" id="newOrgAdminForm" name="newOrgAdminForm" novalidate>
        <input name="searchUsers" type="text" class="form-control" placeholder="enter user name"
               ng-model="search.username"
               uib-typeahead="username for username in allUsernames | filter:$viewValue | limitTo:100"
               typeahead-min-length="3" required>
        <button type="submit" class="btn btn-success" id="searchUsersSubmit" ng-click="searchUsers()" ng-disabled="">
            Search
        </button>
    </form>

    <div ng-repeat="u in foundUsers">
        <div class="row">
            <div class="col-md-2"><strong>Username:</strong></div>
            <div id="user_username" class="col-md-10">{{u.username}}</div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong>Avatar:</strong></div>
            <img ng-if="u.avatarUrl" ng-src="{{u.avatarUrl}}" width="32" height="32"/>
            <div inline-edit model="u.avatarUrl" is-allowed="true" on-ok="updateAvatar(u)" class="col-md-10" ></div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong>Last Login:</strong></div>
            <div class="col-md-10">{{u.lastLogin}}</div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong>Org Curator:</strong></div>
            <div id="user_curator" class="col-md-10">{{u.orgCurator}}</div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong>Org Admin: </strong></div>
            <div id="user_orgadmin" class="col-md-10">{{u.orgAdmin}}</div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong>Site Admin: </strong></div>
            <div id="user_siteadmin" class="col-md-10" ng-bind="u.siteAdmin?'Yes':'No'"></div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong><label for="user.tester">Early Feature User: </label></strong></div>
            <div class="col-md-10">
                <input id="user.tester" ng-model="u.tester" type="checkbox" ng-change="updateTesterStatus(u)">
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong>Roles: </strong></div>
            <div class="col-md-10" id="user_roles_{{$index}}">
                <ui-select multiple ng-model="u.roles" sortable="true" close-on-select="false"
                           theme="select2" style="min-width: 300px"
                           on-remove="updateRoles(u)" on-select="updateRoles(u)">
                    <ui-select-match placeholder="Select answers...">{{$item}}</ui-select-match>
                    <ui-select-choices repeat="role in rolesEnum | filter:$select.search">
                        {{role}}
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2"><strong>Known IPs</strong></div>
            <div class="col-md-10" ng-bind="u.knownIPs"></div>
        </div>

        <user-comments></user-comments>

        <hr/>
    </div>
</div>