<div class="" ng-controller="OrgOverviewCtrl">
    <div class="welcomeSearchSearch">
        <h1 ng-hide="embedded">
            <img id="homeNihCdeLogo" class="img-center-responsive" alt="NIH Common Data Elements (CDE) log"
                 src="/cde/public/assets/img/NIH-CDE.png" />
        </h1>

        <div class="pt20 text-center" id="searchDiv">
            <form name="quickSearchForm" id="quickSearchForm" novalidate method="GET">
                <div class="input-group input-group-lg">
                    <label class="sr-only" for="ftsearch-input">Search Terms</label>
                    <input name="q" id="ftsearch-input" class="form-control search-query" type="text"
                           ng-model="searchSettings.q" ng-maxlength="500" aria-labelledby="l1"
                           typeahead-wait-ms="500" typeahead-min-length="3" autocomplete="off"
                           uib-typeahead="searchQuery for searchQuery in autocomplete.suggest($viewValue) | limitTo:8"
                           typeahead-focus-first="false" typeahead-on-select="searchAction()">

                    <div class="input-group-btn">
                        <button id="search.submit" ng-click="termSearch()" type="submit" class="btn btn-danger btn-lg" >
                            <i class="fa fa-search"></i> Search</button>
                    </div>
                </div>
                <!-- Error display area -->
                <p ng-show="quickSearchForm.searchTerms.$invalid && !quickSearchForm.searchTerms.$pristine"
                    class="error-block"><small>Query terms must be 500 characters or less.</small></p>
            </form>
        </div>
    </div>

    <div>
        <div uib-tabset>
            <div class="row" uib-tab heading="Browse by Classification" ng-click="browseByTopic(false)">
                <span ng-if="orgs.length === 0"><h1 class="pl130"><i class="fa fa-spinner fa-pulse"></i> Searching...</h1></span>
                <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12" ng-repeat="org in orgs | orderBy:'name'">
                    <div class="welcomeSearchOrganizationBox" >
                        <h3 ng-if="!embedded">
                            <a ng-href="search?selectedOrg={{org.name}}" ng-bind="org.name" id="browseOrg-{{org.name}}"
                               ng-click="browseOrg(org.name)"></a></h3>
                        <h3 ng-if="embedded">
                            <a href ng-bind="org.name" id="browseOrg-{{org.name}}"
                               ng-click="browseOrg(org.name)"></a></h3>
                        <div ng-if="org.longName" ng-bind="org.longName"></div>
                        <div><span id="nbOfElts-{{org.name}}">{{org.count}}</span> elements</div>
                        <div ng-if="org.extraInfo" ng-bind="org.extraInfo"></div>
                        <div ng-if="org.source"><a href="{{org.source}}" target="_blank">Source</a></div>
                    </div>
                </div>
            </div>
            <div ng-if="topics.Diseases" uib-tab heading="Browse by Topic" active="byTopic"  ng-click="browseByTopic(true)">
                <div ng-repeat="(key, value) in topics">
                    <div ng-class="{'row':$index %3 === 2}">
                        <div class="col-md-4">
                            <h4 style="margin-bottom:2px;">{{key}}</h4>
                            <ul style="list-style-type: none">
                                <li ng-repeat="t in value | orderBy: 'name'">
                                    <a href="" ng-click="browseTopic(key + ';' + t.name)">{{t.name}} ({{t.count}})</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <hr ng-if="$index % 3 ==2">

                </div>
            </div>

        </div>
        <div style="clear: both;"></div>
        <div class="row"><small><span id="totalItems">{{totalItems}}</span> elements across all classifications</small></div>
    </div>
</div>


