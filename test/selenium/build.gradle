apply plugin: 'java'

sourceCompatibility = '1.7'
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

if (!hasProperty('mainClass')) {
    ext.mainClass = ''
}

repositories {
    mavenCentral()
}

dependencies {
    def seleniumVersion = "2.+"
    testCompile group: 'org.testng', name: 'testng', version: '6.8'
    testCompile "org.seleniumhq.selenium:selenium-firefox-driver:$seleniumVersion"
    testCompile "org.seleniumhq.selenium:selenium-chrome-driver:$seleniumVersion"
    testCompile "org.seleniumhq.selenium:selenium-ie-driver:$seleniumVersion"
    testCompile "org.seleniumhq.selenium:selenium-support:$seleniumVersion"

    testCompile "com.jayway.restassured:rest-assured:2.3.2"
}

tasks.withType(Test) { 
    systemProperty 'testUrl', System.getProperty('testUrl', testUrl)
    systemProperty 'timeout', timeout
    systemProperty 'browser', browser
}

test {    
    useTestNG()
    beforeTest { descriptor ->
        logger.lifecycle("Running test: " + descriptor)
    }    
    maxParallelForks = Integer.parseInt(forkNb)

    testLogging {
        // Uncomment to display system.out and system.err messages
        events "standardOut", "standardError"
    }
}